var __sectokenselect=function(c){var r=function(e){function q(b){if(!b)return alert("UI load error."),!1;var a=document.createElement("div");document.body.insertBefore(a,document.body.firstChild);a.innerHTML=b;return!0}function m(b){n.restoreOnMouseEvent();if(null==e.args||null==e.args.list)return c.uiUtil().msgBox(b.IDS_MSGBOX_ERROR_NO_SELECTED_DRIVER),!1;var a=e.args.list,h=e.args.list.length;if(0>=h)return c.uiUtil().msgBox(b.IDS_MSGBOX_ERROR_NO_SELECTED_DRIVER),!1;for(var d=!1,f=parseInt(n.selectedIndex()),g=0;g<h;g++)if(a[g].index===f){d="invalid"==a[g].validity?!1:!0;break}if(!1==d&&!1==confirm(b.IDS_MSGBOX_CONFIRM_TRUSTLESS_DRIVER))return!1;e.onConfirm(f);return!0}function k(b){var a;if(null==e.args||null==e.args.list||0>=e.args.list.length)a=null;else{a=null;a=e.args.list;for(var h=e.args.list.length,d=[],f=0;f<h;f++){var g=[];g[0]=a[f].name;g[1]=a[f].driver;g[2]=a[f].passage;g[3]=a[f].index;d[f]=g}a={list:d}}s=c.loadUI("gridlist");n=s({type:"driverslist",tblid:"us-sectoken-select-tbl-list",tbltitleid:"us-sectoken-select-tbl-list-th",titlelistid:"us-sectoken-select-grid-head-div",titlerowid:"us-sectoken-select-list-title-row",titleelementid:"us-sectoken-select-list-title-element",titledividerid:"us-sectoken-select-list-title-divider",titlelistcn:"us-layout-sectoken-select-grid-head-div",titlerowcn:"us-layout-sectoken-select-grid-head-row",titleelementcn:"us-layout-sectoken-select-grid-row-title-element",titledividercn:"us-layout-sectoken-select-grid-row-title-divider",tblbodyid:"us-sectoken-select-tbl-list-td",datalistid:"us-sectoken-select-grid-body-div",datarowid:"us-sectoken-select-list-body-row",dataelementid:"us-sectoken-select-list-data-element",datalistcn:"us-layout-sectoken-select-grid-body-div",datarowcn:"us-layout-sectoken-select-grid-body-row",dataelementcn:"us-layout-sectoken-select-grid-row-data-element",dataselectcn:"us-layout-sectoken-select-grid-row-data-selected-element"});h=!0;"opera"==c.browserName&&(h=!1);a?n.drawList(b,b.length,a.list,a.list.length,l+2,h):n.drawList(b,b.length,null,0,l+2,h)}var p=function(){var b;b=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0");b.open("GET",c.ESVS.SRCPath+"unisignweb/rsrc/layout/sectokenselect.html?version="+c.ver,!1);b.send(null);return b.responseText},r=function(){var b;b=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0");b.open("GET",c.ESVS.SRCPath+"unisignweb/rsrc/lang/sectokenselect_"+c.ESVS.Language+".js?version="+c.ver,!1);b.send(null);return b.responseText},s=null,n=null,l=c.ESVS.TabIndex;return function(){var b=eval(p),a=eval(eval(r)());q(b());b=document.getElementById("us-sectoken-select-lbl-title");b.appendChild(document.createTextNode(a.IDS_SECTOKEN_SELECTION));b.setAttribute("tabindex",l,0);var h=document.getElementById("us-sectoken-select-lbl-notice");h.innerHTML=a.IDS_SECTOKEN_NOTICE;h.setAttribute("tabindex",l+1,0);var d=document.getElementById("us-sectoken-select-lbl-notice-txt");d.innerHTML=a.IDS_SECTOEKN_SUGGESTION;d.setAttribute("tabindex",l+3,0);d=document.getElementById("us-sectoken-select-install-driver-btn");d.setAttribute("value",a.IDS_SECTOKEN_DRIVER_INSTALL,0);d.setAttribute("title",a.IDS_SECTOKEN_DRIVER_INSTALL,0);d.setAttribute("tabindex",l+4,0);d.onclick=function(){"firefox"==c.browserName?window.open("http://rootca.or.kr/kor/hsm/hsm.jsp","hsm_url","scrollbars=1"):window.open("http://rootca.or.kr/kor/hsm/hsm.jsp");this.focus()};d=document.getElementById("us-sectoken-select-confirm-btn");d.setAttribute("value",a.IDS_CONFIRM,0);d.setAttribute("title",a.IDS_CONFIRM,0);d.setAttribute("tabindex",l+5,0);d.onclick=function(){m(a)};var f=document.getElementById("us-sectoken-select-cancel-btn");f.setAttribute("value",a.IDS_CANCEL,0);f.setAttribute("title",a.IDS_CANCEL,0);f.setAttribute("tabindex",l+6,0);f.onclick=function(){n.restoreOnMouseEvent();e.onCancel()};var g=document.getElementById("us-sectoken-select-cls-img-btn");g.setAttribute("title",a.IDS_SECTOKEN_SELECTION_CLOSE,0);g.setAttribute("tabindex",l+7,0);g.onclick=function(){n.restoreOnMouseEvent();e.onCancel()};document.getElementById("us-sectoken-select-cls-btn-img").setAttribute("src",c.ESVS.SRCPath+"unisignweb/rsrc/img/x-btn.png",0);c.uiUtil().setRotationTabFocus(f,d,b);c.uiUtil().setRotationTabFocus(b,f,h);k([{title:a.IDS_SECTOKEN_PRODUCT_NAME},{title:a.IDS_SECTOKEN_DRIVER_NAME},{title:a.IDS_SECTOKEN_EXAMINATION_PASSAGE}]);return document.getElementById("us-div-sectoken-select")}()};return function(e){var q=c.uiLayerLevel,m=c.uiUtil().getOverlay(q),k=r({type:e.type,args:e.args,onConfirm:e.onConfirm,onCancel:e.onCancel});k.style.zIndex=q+1;document.body.insertBefore(m,document.body.firstChild);var p=window.onresize;return{show:function(){draggable(k,document.getElementById("us-div-sectoken-select-title"));m.style.display="block";c.uiUtil().offsetResize(k);window.onresize=function(){c.uiUtil().offsetResize(k);p&&p()};c.uiLayerLevel+=10;c.ESVS.TabIndex+=30;setTimeout(function(){c.uiUtil().setFirstFocus("us-sectoken-select-lbl-title")},10)},hide:function(){m.style.display="none";k.style.display="none"},dispose:function(){window.onresize=function(){p&&p()};k.parentNode.parentNode.removeChild(k.parentNode);m.parentNode.removeChild(m);c.uiLayerLevel-=10;c.ESVS.TabIndex-=30}}}};