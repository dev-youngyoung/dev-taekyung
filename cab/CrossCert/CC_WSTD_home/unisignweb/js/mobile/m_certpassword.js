var __certpassword=function(a){var s=function(e){function q(a){if(!a)return alert("UI load error."),!1;var c=document.createElement("div");document.body.insertBefore(c,document.body.firstChild);c.innerHTML=a;return!0}function l(b){if(!b)return!1;var c=a.loadUI("certview")({type:null,args:{type:m,idx:h,cert:n},onConfirm:function(){c.dispose();b.focus()},onCancel:function(){c.dispose();b.focus()}});c.show();return!0}function d(b){if(!b)return!1;var c=document.getElementById("m-us-input-cert-password-textbox");if(!c.value)return a.uiUtil().msgBox(b.IDS_MSGBOX_ERROR_PLEASE_INPUT_PASSWORD),c.focus(),!1;if(!a.certsList||!a.PFUC)return a.uiUtil().msgBox(b.IDS_MSGBOX_ERROR_NO_SELECTED_CERT),!1;var d=parseInt(h),k=null;try{k=a.usWebToolkit.pkcs8.encryptedPrivateKeyFromBase64(a.PFUC[d].signpri)}catch(g){console.log("***** encryptedPrivateKeyFromBase64 error *****"),console.log("Err Code : ",g.code,"\nErr Msg : ",g.message)}d=!1;try{d=a.usWebToolkit.pkcs8.checkUserCertPassword(k,c.value)}catch(l){console.log("***** CheckUserCertPassword error *****"),console.log("Err Code : ",l.code,"\nErr Msg : ",l.message)}finally{}if(!1===d)a.uiUtil().msgBox(b.IDS_MSGBOX_ERROR_PASSWORD_IS_NOT_MATCHED),f++,f>=a.ESVS.LimitNumOfTimesToTryToInputPW?(a.uiUtil().msgBox(b.IDS_MSGBOX_ERROR_OVER_NUMBER_OF_ALLOWED_BEFORE+a.ESVS.LimitNumOfTimesToTryToInputPW+b.IDS_MSGBOX_ERROR_OVER_NUMBER_OF_ALLOWED_AFTER),e.onTerminate()):(c.value="",c.focus());else e.onConfirm(h,c.value);c.value="";return!0}var p=function(){var b;b=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0");b.open("GET",a.ESVS.SRCPath+"unisignweb/rsrc/layout/mobile/m_certpassword.html?V="+a.ver,!1);b.send(null);return b.responseText},t=function(){var b;b=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0");b.open("GET",a.ESVS.SRCPath+"unisignweb/rsrc/lang/password_"+a.ESVS.Language+".js?V="+a.ver,!1);b.send(null);return b.responseText},k=a.ESVS.TabIndex,m=e.args.type,h=e.args.idx,n=e.args.cert,f=0;return function(){var b=eval(p),c=eval(eval(t)());q(b());document.getElementById("m-us-lbl-cert-password-title").appendChild(document.createTextNode(c.IDS_PASSWORD));a.usWebToolkit.x509Certificate.parser(n,m);var f=a.usWebToolkit.x509Certificate.getCertificatePoliciesOid(),h=a.usWebToolkit.x509Certificate.getSubjectName(),g=a.usWebToolkit.x509Certificate.getNotAfter(),b=a.certUtil().getIssuerName(f);"undefined"==b&&(b=a.certUtil().getO(h));var h=a.certUtil().getCN(h),f=a.certUtil().getCertType(f),s=a.certUtil().getLocalDate(g),g=a.certUtil().getExpirationStateValue(g),r=document.getElementById("m-us-img-cert-password");if(0===g)r.setAttribute("src",a.ESVS.SRCPath+"unisignweb/rsrc/img/mobile/m_cert_valid_small.png",0);else if(1===g)r.setAttribute("src",a.ESVS.SRCPath+"unisignweb/rsrc/img/mobile/m_cert_valid_1_month_small.png",0);else if(2===g)r.setAttribute("src",a.ESVS.SRCPath+"unisignweb/rsrc/img/mobile/m_cert_invalid_small.png",0);else return;g=document.getElementById("m-us-div-cert-password-info").getElementsByTagName("span");g[0].appendChild(document.createTextNode(h));g[1].appendChild(document.createTextNode(c.IDS_CERT_ISSUER));g[2].appendChild(document.createTextNode(b));g[3].appendChild(document.createTextNode(c.IDS_CERT_CLASSIFY));g[4].appendChild(document.createTextNode(f));g[5].appendChild(document.createTextNode(c.IDS_CERT_EXPIRATION_DAY));g[6].appendChild(document.createTextNode(s));document.getElementById("m-us-lbl-cert-password-pw").appendChild(document.createTextNode(c.IDS_CERT_PASSWORD));document.getElementById("m-us-lbl-cert-password-sub-notice").appendChild(document.createTextNode(c.IDS_CERT_PASSWORD_SUB_NOTICE));b=document.getElementById("m-us-input-cert-password-textbox");b.setAttribute("tabindex",k,0);b.onkeydown=function(a){if(a=a?a:event)a=a||window.event,13==(a.which||a.keyCode)&&document.getElementById("m-us-password-confirm-btn").click()};b=document.getElementById("m-us-cert-password-view-btn");b.setAttribute("value",c.IDS_CERT_VIEW,0);b.setAttribute("title",c.IDS_CERT_VIEW+c.IDS_BUTTON,0);b.setAttribute("tabindex",k+1,0);b.onclick=function(){l(this)};b=document.getElementById("m-us-cert-password-ccl-btn");b.setAttribute("value",c.IDS_CERT_CANCEL,0);b.setAttribute("title",c.IDS_CERT_CANCEL+c.IDS_BUTTON,0);b.setAttribute("tabindex",k+2,0);b.onclick=function(){e.onCancel()};b=document.getElementById("m-us-cert-password-cfrm-btn");b.setAttribute("value",c.IDS_CERT_CONFIRM,0);b.setAttribute("title",c.IDS_CERT_CONFIRM+c.IDS_BUTTON,0);b.setAttribute("tabindex",k+3,0);b.onclick=function(){d(c)};b=document.getElementById("m-us-cert-password-cls-btn-img");b.setAttribute("alt",c.IDS_PASSWORD_CLOSE,0);b.setAttribute("src",a.ESVS.SRCPath+"unisignweb/rsrc/img/mobile/m_x-btn.png",0);b=document.getElementById("m-us-cert-password-cls-btn");b.setAttribute("tabindex",k+4,0);b.onclick=function(){e.onCancel()};return document.getElementById("m-us-div-cert-password")}()};return function(e){var q=a.uiLayerLevel,l=a.uiUtil().getOverlay(q),d=s({type:e.type,args:e.args,onConfirm:e.onConfirm,onCancel:e.onCancel,onTerminate:e.onTerminate});d.style.zIndex=q+1;a.ESVS.TargetObj.insertBefore(l,a.ESVS.TargetObj.firstChild);var p=window.onorientationchange;return{show:function(){l.style.display="block";var e=a.uiUtil().getNumSize(a.uiUtil().getStyle(d,"height","height")),e=-1===e?a.uiUtil().getScrollTop()+a.uiUtil().getViewportHeight()/6:a.uiUtil().getScrollTop()+(a.uiUtil().getViewportHeight()-e)/3;d.style.top=0>e?"0px":e+"px";d.style.left=a.uiUtil().getScrollLeft()+(a.uiUtil().getViewportWidth()-a.uiUtil().getNumSize(a.uiUtil().getStyle(d,"width","width")))/2+"px";d.style.display="block";var k=0,m=0,h=0,n=0;0==window.orientation||180==window.orientation?(k=a.uiUtil().getViewportWidth(),m=a.uiUtil().getViewportHeight()):(h=a.uiUtil().getViewportWidth(),n=a.uiUtil().getViewportHeight());window.addEventListener("orientationchange",function(){var f=0,b=0;"android chrome"==a.browserName||"unknown"==a.browserName?0==window.orientation||180==window.orientation?0<k?(f=k,b=m):(f=n+87,b=h-40):0<h?(f=h,b=n):(f=m+87,b=k-40):(f=a.uiUtil().getViewportWidth(),b=a.uiUtil().getViewportHeight());var c=a.uiUtil().getNumSize(a.uiUtil().getStyle(d,"width","width"));-1<c&&(f=a.uiUtil().getScrollLeft()+(f-c)/2+"px",d.style.left=f);f=a.uiUtil().getNumSize(a.uiUtil().getStyle(d,"height","height"));b=-1===f?a.uiUtil().getScrollTop()+b/6:a.uiUtil().getScrollTop()+(b-f)/3;d.style.top=b+"px";p&&p()});a.uiLayerLevel+=10;a.ESVS.TabIndex+=30;setTimeout(function(){var a=d.getElementsByTagName("input");if(0<a.length)for(var b=0;b<a.length;b++)"m-us-input-cert-password-textbox"==a[b].id&&a[b].focus()},10)},hide:function(){l.style.display="none";d.style.display="none"},dispose:function(){window.addEventListener("orientationchange",function(){p&&p()});d.parentNode.parentNode.removeChild(d.parentNode);l.parentNode.removeChild(l);a.uiLayerLevel-=10;a.ESVS.TabIndex-=30}}}};