<form novalidate name="form1" id="form1" method="post" onsubmit="return formSubmit(this);">
<input type="hidden" name="save" value="1">
<input type="hidden" name="chk_vendcd" value="0">

<div class="div_table" id="aaa">
    <div class="util-row">
        <div class="push-left">
            <h3>회사정보</h3>
        </div>
    </div>
    <table>
    <colgroup>
        <col width="15%">
        <col width="35%">
        <col width="15%">
        <col width="35%">
    </colgroup>
    <tr>
        <th class="req-check">상호</th>
        <td><input type="text" name="vendnm" style="width:95%" /></td>
        <th <!-- IFNOT START 'modify' -->class="req-check"<!-- IFNOT END 'modify' -->>사업자번호</th>
        <td>
            <!-- IFNOT START 'modify' -->
            <input type="text" name="vendcd1" size="3" maxlength="3" style="ime-mode:disabled" onKeyDown="num_only()" onKeyUp="moveNext('vendcd2')"> -
            <input type="text" name="vendcd2" size="2" maxlength="2" style="ime-mode:disabled" onKeyDown="num_only()" onKeyUp="moveNext('vendcd3');movePrv('vendcd1')"> -
            <input type="text" name="vendcd3" size="5" maxlength="5" style="ime-mode:disabled" onKeyDown="num_only()" onKeyUp="movePrv('vendcd2')">
            <button type="button"  class="sbtn color ico-search" onclick="chkVendcd()"><span></span>중복확인</button>
            <!-- IFNOT END 'modify' -->
            <!-- IF START 'modify' -->
            {{supp.vendcd}}
            <input type="hidden" name="vendcd" value="{{supp.vendcd}}">
            <!-- IF END 'modify' -->
        </td>
    </tr>
    <tr>
        <th class="req-check">대표자명</th>
        <td><input type="text" name="boss_name" style="width:95%" maxlength="30" ></td>
        <th class="req-check">종업원수</th>
        <td><input type="text" name="worker_cnt" maxlength="4" size="4" style="ime-mode:disabled;text-align:right" onkeydown="num_only()" onkeypress="num_only()" onKeyUp="fnMakeComma()"/> 명</td>
    </tr>
    <tr>
        <th class="req-check">주소</th>
        <td colspan="3">
            <input type="text" name="post_code" class="in_readonly" readonly size="6">
            <button type="button"  class="sbtn color ico-search" onclick="jusoPopup()"><span></span>우편번호찾기</button>
            <input type="text" name="address" style="width:95%" maxlength="150">
        </td>
    </tr>
    <tr>
        <th class="req-check">자본금</th>
        <td><input type="text" name="capital" size="10" maxlength="10" style="ime-mode:disabled;text-align:right" onKeyDown="num_only()" onkeypress="num_only()" onKeyUp="fnMakeComma()"> 백만원</td>
        <th class="req-check">년 매출액</th>
        <td><input type="text" name="sales_amt" size="10" maxlength="10" style="ime-mode:disabled;text-align:right" onKeyDown="num_only()" onkeypress="num_only()" onKeyUp="fnMakeComma()"> 백만원(2014년기준)</td>
    </tr>
    <tr>
        <th class="req-check">취급 분야</th>
        <td colspan="3">
            <input type="hidden" name="category_cds">
            <!-- LOOP START 'category' -->
            <input type="checkbox" name="category_cd" value="{{category.code}}"> {{category.code_name}} &nbsp;&nbsp;
            <!-- IF START 'category.br_yn' --><br><!-- IF END 'category.br_yn' -->
            <!-- LOOP END 'category' -->
        </td>
    </tr>
    </table>
</div>

<div class="div_table">
    <div class="util-row">
        <div class="push-left">
            <h3>주요 납품처<span> ※ 최소 2개이상의 납품처를 입력하세요.</span></h3>
        </div>
        <div class="push-right">
            <button type="button" class="sbtn color ico-add" onclick="client_grid.addRow();"><span></span>추가</button>
        </div>
    </div>
    <table id="client_grid">
     <colgroup>
        <col width="15%">
        <col width="40%">
        <col width="35%">
        <col width="10%">
     </colgroup>
     <thead>
     <tr>
       <th>납품년도</th>
       <th>납품처</th>
       <th>비고</th>
       <th>기능</th>
      </tr>
      </thead>
      <tbody>
      <!-- LOOP START 'client' -->
        <tr>
            <td align="center"><input type="text" name="delivery_year" style="ime-mode:disabled" size="4" required="Y" hname="납품년도" onkeydown="num_only()" onkeypress="num_only()" value="{{client.delivery_year}}" /> 년</td>
            <td><input type="text" name="client_name" style="width:95%" required="Y" hname="납품처" value="{{client.client_name}}" /></td>
            <td><input type="text" name="client_etc" style="width:95%" value="{{client.etc}}"/></td>
            <td align="center">
                <button type="button" class="sbtn color" onclick="client_grid.del(this)">삭제</button>
            </td>
        </tr>
      <!-- LOOP END 'client' -->
      </tbody>
    </table>
</div>

<div class="div_table">
    <div class="util-row">
        <div class="push-left">
            <h3>대표 품목<span> ※ 최소 1개이상의 대표품목을 입력하세요.</span></h3>
        </div>
        <div class="push-right">
            <button type="button" class="sbtn color ico-add" onclick="item_grid.addRow();"><span></span>추가</button>
        </div>
    </div>
    <table id="item_grid">
    <colgroup>
    <col width="50%">
    <col width="40%">
    <col width="10%">
    </colgroup>
    <thead>
    <tr>
        <th>폼목명</th>
        <th>비고</th>
        <th>기능</th>
    </tr>
    </thead>
    <tbody>
    <!-- LOOP START 'item' -->
    <tr>
        <td class="hcel_l"><input type="text" name="item_name" style="width:95%" required="Y" hname="품목명" value="{{item.item_name}}"/></td>
        <td class="hcel_l"><input type="text" name="item_etc" style="width:95%" value="{{item.etc}}"/></td>
        <td class="hcel_r" align="center">
            <button type="button" class="sbtn color" onclick="item_grid.del(this)">삭제</button>
        </td>
    </tr>
    <!-- LOOP END 'item' -->
    </tbody>
    </table>
</div>

<div class="div_table">
    <div class="util-row">
        <div class="push-left">
            <h3>담당자정보</h3>
        </div>
    </div>
    <table>
    <colgroup>
        <col width="17%">
        <col width="33%">
        <col width="15%">
        <col width="35%">
    </colgroup>
    <tr>
        <th class="req-check">이름</th>
        <td><input type="text" name="user_name" style="width:95%" /></td>
        <th class="req-check">직책</th>
        <td><input type="text" name="position" style="width:95%" /></td>
    </tr>
    <tr>
        <th class="req-check">부서</th>
        <td><input type="text" name="dept_name" style="width:95%" /></td>
        <th class="req-check">전화번호</th>
        <td><input type="text" name="tel_num" style="width:100px" /> <font color="gray">예) 02-788-9097</font></td>
    </tr>
    <tr>
        <th class="req-check">핸드폰번호</th>
        <td>
            <select name="hp1" onChange="if(this.value!=''){document.forms['form1']['hp2'].focus();}">
                <option value="">선택</option>
                <option value="010">010</option>
                <option value="011">011</option>
                <option value="016">016</option>
                <option value="017">017</option>
                <option value="018">018</option>
                <option value="019">019</option>
            </select> -
            <input type="text" name="hp2" size="4" maxlength="4" style="ime-mode:disabled" onKeyDown="num_only()" onKeyUp="moveNext('hp3'); movePrv('hp1')"> -
            <input type="text" name="hp3" size="4" maxlength="4" style="ime-mode:disabled" onKeyDown="num_only()" onKeyUp=" movePrv('hp2')">
        </td>
        <th>팩스번호</th>
        <td><input type="text" name="fax_num" style="width:100px" /> <font color="gray">예) 02-788-9097</font></td>
    </tr>
    <tr>
        <th class="req-check">비밀번호</th>
        <td colspan="3">
            <input type="password" name="passwd" maxlength="20" size="20" />
            <span class="caution-text">※ 신청정보 조회 및 수정시 확인 할 비밀번호를 입력 하세요.</span>
        </td>
    </tr>
    <tr>
    <th class="req-check">비밀번호 확인</th>
    <td colspan="3">
        <input type="password" name="passwd2" maxlength="20" size="20" />
    </td>
    </tr>
    </table>
</div>

<div class="btn-group-wrap">
    <!-- IFNOT START 'modify' -->
    <button type="submit" class="sbtn color ico-save"><span></span>신청하기</button>
    <!-- IFNOT END 'modify' -->
    <!-- IF START 'modify' -->
    <button type="submit" class="sbtn color ico-change"><span></span>수정하기</button>
    <!-- IF END 'modify' -->
    <button type="button" class="sbtn color ico-cancel" onclick="self.close()"><span></span>닫기</button>
</div>
</form>
{{form_script}}

<div id="black_area" style="width:100%;height:100%;position:absolute;top:0px;left:0px;z-index:10;background-color:#000000; filter:alpha(opacity=50);opacity:0.5;display:none" align="center">
</div>
<div id="passwd_area" style="width:300px;height:350px;border:2px solid black; padding:30px; background-color: #ffffff;z-index:20;position: absolute;top:100px;left:250px;display:none" >
<form name="form2" method="post" onsubmit="return false;">
<input type="hidden" name="vendcd">
<input type="save" name="">
<div class="div_table">
    <div class="util-row">
        <div class="push-left">
            <h3>본인확인</h3>
        </div>
        <div class="push-right">
            <span style="font-size:11px;color: #e08036;">※ 신청시 입력한 비밀번호를 입력 하세요.</span>
        </div>
    </div>
    <table>
    <colgroup>
        <col width="40%">
        <col width="60%">
    </colgroup>
    <tr>
        <th>비밀번호</th>
        <td><input type="password" name="passwd3" style="width:95%" /></td>
    </tr>
    </table>
    <div class="btn-group-wrap">
        <button type="button" class="sbtn color" onclick="formSubmit2();"><span></span>확인</button>
        <button type="button" class="sbtn color" onclick="hidePasswd();"><span></span>취소</button>
    </div>
</div>
</form> 
</div>

<div style="display:none">
<table id="client_template">
	<tr>
		<td><input type="text" name="delivery_year" style="ime-mode:disabled" size="4" required="Y" hname="납품년도" onkeydown="num_only()" onkeypress="num_only()" /> 년</td>
		<td><input type="text" name="client_name" style="width:95%" required="Y" hname="납품처" /></td>
		<td><input type="text" name="client_etc" style="width:95%" /></td>
		<td align="center">
            <button type="button" class="sbtn color" onclick="client_grid.del(this)">삭제</button>
        </td>
	</tr>
</table>
<table id="item_template">
	<tr>
	   <td class="hcel_l"><input type="text" name="item_name" style="width:95%" required="Y" hname="품목명" /></td>
	   <td class="hcel_l"><input type="text" name="item_etc" style="width:95%" /></td>
	   <td class="hcel_r" align="center">
           <button type="button" class="sbtn color" onclick="item_grid.del(this)">삭제</button>
       </td>
	 </tr>
</table>
</div>

<script type="text/javascript">

function formSubmit(f){
	f['category_cds'].value=GetFormValue("form1","category_cd");
	if(validate(f)){
		<!-- IFNOT START 'modify' -->
		if(f['chk_vendcd'].value!="1"){
			alert("사업자등록번호 중복 확인을 해 주세요.");
			return false;
		}
		<!-- IFNOT END 'modify' -->
		if(document.getElementById("client_grid").rows.length<3){
			alert("주요납품처를 2개 이상 등록하세요.");
			return false;
		}
		if(document.getElementById("item_grid").rows.length<2){
			alert("대표품목을 1개 이상 등록하세요.");
			return false;
		}
		<!-- IFNOT START 'modify' -->
		if(confirm("신청하시겠습니까?")){
			return true; 
		}
		<!-- IFNOT END 'modify' -->
		<!-- IF START 'modify' -->
		if(confirm("수정하시겠습니까?")){
			return true; 
		}
		<!-- IF END 'modify' -->
	}
	return false;
}

function formSubmit2(){
	var f = document.forms["form2"];
	var vendcd = document.forms["form1"]['vendcd'].value;
	f['vendcd'].value=vendcd;
	if(f['passwd3'].value==""){
		alert("비밀번호를 입력하세요.");
		f['passwd'].focus();
		return;
	}
	f.action="pop_recruit_modify.jsp?{{query}}";
	f.submit();
}


var client_grid = new MGRID("client_grid");
client_grid.cells = table2array("client_template");
client_grid.cellAligns = new Array("center","left","left","center");
client_grid.cellClassNames = new Array("hcel_l", "hcel_l","hcel_l","hcel_r");


var item_grid = new MGRID("item_grid");
item_grid.cells = table2array("item_template");
item_grid.cellAligns = new Array("left","left","center");
item_grid.cellClassNames = new Array("hcel_l", "hcel_l", "hcel_r");


function chkVendcd (){
	var f = document.forms['form1'];
	var vendcd = f['vendcd1'].value + f['vendcd2'].value + f['vendcd3'].value;
	if(vendcd.length!=10){
		alert("사업자등록번호를 정확히 입력하세요.");
		return;
	}
	call("./chk_recruit_vendcd.jsp?{{query}}&vendcd="+vendcd);
}
function fChkVendCd(){
	var f = document.forms['form1'];
	f['chk_vendcd'].value="0";
	return;
}


function setDisableWrite(){
	var elements = document.getElementById("aaa").getElementsByTagName("input");
	for(var i = 0 ; i < elements.length; i ++){
		if(elements[i].name!="vendcd1"&&elements[i].name!="vendcd2"&&elements[i].name!="vendcd3"){
			setDisabled(elements[i]);
		}
	}
	setDisabled(document.forms['form1']['password']);
	setDisabled(document.forms['form1']['password_confirm']);
	setDisabled(document.forms['form1']['hp1']);
}

function setWrite(){
	var elements = document.getElementById("aaa").getElementsByTagName("input");
	for(var i = 0 ; i < elements.length; i ++){
		if(elements[i].name=="vendcd1"||elements[i].name=="vendcd2"||elements[i].name=="vendcd3"||elements[i].name=="post_code1"||elements[i].name=="post_code2"){
			setDisabled(elements[i]);
		}else{
			setEnabled(elements[i]);
		}
	}
	setEnabled(document.forms['form1']['password']);
	setEnabled(document.forms['form1']['password_confirm']);
	setEnabled(document.forms['form1']['hp1']);
	
}

function showPasswd(){
	document.getElementById("black_area").style.display="";
	document.getElementById("passwd_area").style.display="";
}

function hidePasswd(){
	document.getElementById("black_area").style.display="none";
	document.getElementById("passwd_area").style.display="none";
}

<!-- IFNOT START 'modify' -->
client_grid.addRow();
client_grid.addRow();
item_grid.addRow();
setDisableWrite();
alert("사업자등록번호 중복 확인 후 신청/작성 가능합니다.");
document.forms['form1']['vendcd1'].focus();
<!-- IFNOT END 'modify' -->

function jusoCallBack(roadFullAddr,roadAddrPart1,addrDetail,roadAddrPart2,engAddr, jibunAddr, zipNo ,admCd, rnMgtSn, bdMgtSn){
    var f = document.forms['form1'];
    f['address'].value=roadFullAddr;
    f['post_code'].value=zipNo;
}
</script>
