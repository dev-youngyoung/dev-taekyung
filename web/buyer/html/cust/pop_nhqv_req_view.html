<form name="form1" method="post" enctype="multipart/form-data" onsubmit="return formSubmit(this)">
<input type="hidden" name="status">
<input type="hidden" name="req_html">
<input type="hidden" name="evaluate_html">

<div class="util-row">
	<div class="push-right">
		<font color="#93a700">[신청상태: <b>{{cust.status_nm}}</b>]</font>
	</div>
</div>

<!-- IF START 'cust.mod_req_date' -->
<div class="div_table">
	<div class="util-row">
		<div class="push-left">
			<h3>수정요청정보</h3>
		</div>
		<table>
			<colgroup>
				<col width="20%">
				<col width="30%">
				<col width="20%">
				<col width="30%">
			</colgroup>
			<tr>
				<th>요청일시</th>
				<td>{{cust.mod_req_date}}</td>
				<th>요청자</th>
				<td>{{cust.mod_req_name}}</td>
			</tr>
			<tr>
				<th>사유</th>
				<td colspan="3">{{cust.mod_req_reason}}</td>
			</tr>
		</table>
	</div>
</div>
<!-- IF END 'cust.mod_req_date' -->

<div class="cont_warp">
<div id="__html">
	<div style="display:{{cust.display_req}}" id="__html_0">
		{{cust.req_html}}
	</div>
	<div style="display:{{cust.display_evaluate}}" id="__html_1">
		{{cust.evaluate_html}}
	</div>
</div>
</div>

<!-- IF START 'view_evaludate_etc' -->
<div class="div_table">
	<div class="util-row">
		<div class="push-left">
			<h3>기타 평가 사항</h3>
		</div>
		<table>
			<tr>
				<td align="center">
					<!-- IF START 'btn_save' -->
					<textarea name="evaluate_etc" style="width:100%;height:50px"  onkeyup="autoTextAreaHeight(this,50)">{{cust.evaluate_etc}}</textarea>
					<!-- IF END 'btn_save' -->
					<!-- IFNOT START 'btn_save' -->
						{{cust.evaluate_etc}}
					<!-- IFNOT END 'btn_save' -->
				</td>
			</tr>
		</table>
	</div>
</div>
<!-- IF END 'view_evaludate_etc' -->
<div class="btn-group-wrap">
	<button type="button" class="btn color ico-print" onclick="evalPdfViewer();"><span></span>인쇄</button>
	<!-- IF START 'btn_modify_req' -->
	<button type="button" class="btn color ico-request" onclick="OpenWindow('pop_nhqv_mod_req.jsp?{{query}}','mod_req',600,500)"><span></span>수정요청</button>
	<!-- IF END 'btn_modify_req' -->
	<!-- IF START 'btn_modify_confirm' -->
	<button type="button" class="btn color ico-confirm" onclick="if(confirm('수정확인처리 하시겠습니까?\n\n수정확인처리시 신청중상태로 변경 됩니다.')){location.href='pop_nhqv_mod_confirm.jsp?{{query}}';}"><span></span>수정확인</button>
	<!-- IF END 'btn_modify_confirm' -->
	<!-- IF START 'btn_save' -->
	<button type="submit" class="btn color ico-save"><span></span>저장</button>
	<!-- IF END 'btn_save' -->
	<!-- IF START 'btn_evaluate' -->
	<button type="button" class="btn color ico-check" onclick="evaluateEnd()"><span></span>심사완료</button>
	<!-- IF END 'btn_evaluate' -->
	<button type="button" class="btn color ico-cancel" onclick="self.close();"><span></span>닫기</button>
</div>
</form>
{{form_script}}
<script type="text/javascript">

function formSubmit(f){
	if(validate(f)){
		if(f['point13']){
			if(f['point13'].value==""){
				f['point13'].focus();
				alert("기타평가 점수를 입력 하세요.");
				return false;
			}
		}
		var msg = "저장하시겠습니까?";
		if(f['status'].value == "40") msg = "심사완료 처리 하시겠습니까?\n\n완료처리 시 더이상 수정 할 수 없습니다"; 
		if(confirm(msg)){
			setDivInputValue("__html");
			f['req_html'].value= Base64.encode(document.getElementById("__html_0").innerHTML);
			f['evaluate_html'].value= Base64.encode(document.getElementById("__html_1").innerHTML);
			return true;
		}
	}
	return false;
}

function evaluateEnd(){
	var f = document.forms['form1'];
	f['status'].value = "40";
	if(formSubmit(f)){
		f.submit();	
	}
}

function mofReq(){
	var f = document.forms['form1'];
	f['status'].value="20";
	if(formSubmit(f)){
		f.submit();
	}
}


function convertHtml(){
	for(var i=0; i<=2; i++)
	{
		if( document.getElementById("__html_"+i) !== null )
		{
			removeInput2(document.getElementById("__html_"+i));
		}
	}
}
<!-- IF START 'exe_convertHtml' -->
convertHtml();
<!-- IF END 'exe_convertHtml' -->


<!-- IF START 'btn_save' -->
attachOnload(function(){
	autoTextAreaHeight(document.forms['form1']['evaluate_etc'],50);
});
<!-- IF END 'btn_save' -->

function evalPdfViewer(){
    var link = "{{print_url}}";

    OpenWindow(link,"eval_pdfViewer",830,850);
}
</script>