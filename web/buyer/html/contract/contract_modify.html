<form novalidate name="form1" method="post" enctype="multipart/form-data" onsubmit="return formSubmit(this);" autocomplete="off">
<input type="hidden" name="invest_no" />
<input type="hidden" name="invest_seq" />
<!-- IF START 'agreeTemplate' -->
<div class="div_table">
	<div class="util-row">
	    <div class="push-left">
	    	<h3>계약진행정보</h3>
	    </div>
	</div>
	<div class="contract-info">
		<ul>
			<li class="is-active">
		       <em><span>작성자</span></em>
		       <div class="info-body">
			       <p class="info-name">
					   <!-- IFNOT START 'modify' -->
					   {{_auth._USER_NAME}}
					   <!-- IFNOT END 'modify' -->
					   <!-- IF START 'modify' -->
					   {{cont.writer_name}}
					   <!-- IF END 'modify' -->
			       </p>
		       </div>
			</li>
			<!-- LOOP START 'agreeTemplate' -->
				
				<li>
			       <em><span>{{agreeTemplate.agree_name}}</span></em>
			       <div class="info-body">
			       		<!-- IFNOT START 'agreeTemplate.is_cust' -->
			       		<button type="button" class="auth_css" onclick="OpenWindows('pop_inter_person.jsp?template_cd={{template.template_cd}}&agree_seq={{agreeTemplate.agree_seq}}','inter', 500, 450);"></button>
			       		<p class="info-name"><span class="agree_person_name_{{agreeTemplate.agree_seq}}">{{agreeTemplate.agree_person_name}}</span></p>
			       		<!-- IFNOT END 'agreeTemplate.is_cust' -->
			       		<input type="hidden" name="agree_seq" value="{{agreeTemplate.agree_seq}}">
						<input type="hidden" name="agree_name" value="{{agreeTemplate.agree_name}}">
						<input type="hidden" name="agree_field_seq" value="{{agreeTemplate.agree_field_seq}}">
						<input type="hidden" name="agree_person_name" value="{{agreeTemplate.agree_person_name}}" hname="{{agreeTemplate.agree_name}}" <!-- IFNOT START 'agreeTemplate.is_cust' -->required="Y" <!-- IFNOT END 'agreeTemplate.is_cust' -->>
						<input type="hidden" name="agree_person_id" value="{{agreeTemplate.agree_person_id}}">
						<input type="hidden" name="agree_cd" value="{{agreeTemplate.agree_cd}}">
			       </div>
				</li>
			
			<!-- LOOP END 'agreeTemplate' -->
		</ul>
	</div>    
</div>
<!-- IF END 'agreeTemplate' -->

<!-- IF START 'cont.mod_req_date' -->
<div class="div_table">
	<div class="util-row">
	    <div class="push-left">
	        <h3>수정요청/반려 사유</h3>
	    </div>
	    <div class="push-right">    	
			계약상태 : <span class="caution-text">작성중</span>        
	    </div>
	</div>
	<table>
		<colgroup>
			<col width="20%">
			<col width="30%">
			<col width="20%">
			<col width="30%">
		</colgroup>
		<tr>
			<th>요청업체명</th>
			<td>{{cont.mod_req_name}}</td>
			<th>요청일시</th>
			<td>{{cont.mod_req_date}}</td>
		</tr>
		<tr>
			<th>사유</th>
			<td colspan="3">{{cont.mod_req_reason}}</td>
		</tr>
	</table>
</div>
<br/>
<!-- IF END 'cont.mod_req_date' -->

<div class="div_table">
	<div class="util-row">
	    <div class="push-left">
	        <h3>계약기본정보</h3>
	    </div>
	    <div class="push-right">
			<!-- IFNOT START 'cont.mod_req_date' -->
			<!-- IF START 'modify' -->
			계약상태: <span class="caution-text">작성중</span>
			<!-- IF END 'modify' -->
			<!-- IFNOT END 'cont.mod_req_date' -->
	    </div>
	</div>
	<table>
		<colgroup>
			<col width="15%">
			<col width="35%">
			<col width="15%">
			<col width="35%">
		</colgroup>
		<!-- <tr>
			<th class="req-check">계약명</th>
			<td colspan="3">
				<input type="text" name="cont_name" style="width:95%" onChange="replaceInput(this, this.name, document.all.__html)" onblur="replaceInput(this, this.name, document.all.__html)">
			</td>
		</tr> -->
		<tr>
			<th class="req-check">계약일자</th>
			<td>
				<input type="hidden" id="cont_name" name="cont_name" value="{{cont.cont_name}}" />
				<input type="hidden" name="cont_userno" value="{{cont.cont_userno}}" />
				<input type="text" name="cont_date" value="{{sysdate}}" class="in_readonly" style="ime-mode:disabled;width:100px" size="10" maxlength="10" onkeydonw="num_only()" onkeypress="num_only()" onkeyup="dateFormat(this);chgContDate()" callback="chgContDate" />
				<img src="../html/images/common/datepicker_icon.png" align="absmiddle" style="cursor:pointer" onClick="new CalendarFrame.Calendar(document.forms['form1']['cont_date'])">
			</td>
			<th>자동연장여부</th>
			<td>
				<input type="radio" name="auto_yn" value="Y">&nbsp;사용&nbsp;&nbsp;
				<input type="radio" name="auto_yn" value="N">&nbsp;미사용
			</td>
			<!-- <th>계약번호</th>
			<td>
				<input type="text" name="cont_userno" style="width:100%" maxlength="40" onChange="replaceInput(this, this.name, document.all.__html)" onblur="replaceInput(this, this.name, document.all.__html)">
			</td> -->
		</tr>
		<!-- IFC START 'template.person_yn!=Y' -->
		<tr>
			<th>전자결재여부</th>
			<td>
				<!-- IFNOT START 'modify' -->
				<input type="radio" name="appr_yn" value="Y">&nbsp;사용&nbsp;&nbsp;
				<input type="radio" name="appr_yn" value="N">&nbsp;미사용
				<!-- IFNOT END 'modify' -->
				<!-- IF START 'modify' -->
				<input type="radio" name="appr_yn" value="Y" onclick="return(false);">&nbsp;사용&nbsp;&nbsp;
				<input type="radio" name="appr_yn" value="N" onclick="return(false);">&nbsp;미사용
				<!-- IF END 'modify' -->
			</td>
			<th>인지세사용여부</th>
			<td>
				<input type="radio" id="stamp_type_y" name="stamp_type" value="Y">&nbsp;사용&nbsp;&nbsp;
				<input type="radio" id="stamp_type_n" name="stamp_type" value="N">&nbsp;미사용
			</td>
		</tr>
		<!-- IFC END 'template.person_yn!=Y' -->
		<!-- IF START 'change_cont' -->
		<tr>
			<th class="req-check">계약구분</th>
			<td colspan="3">
				<select name="change_gubun" onchange="chgChangeGubun(this.value)">
					<option value="">-선택-</option>
					<!-- LOOP START 'code_change_gubun' -->
					<option value="{{code_change_gubun.id}}">{{code_change_gubun.value}}</option>
					<!-- LOOP END 'code_change_gubun' -->
				</select>
			</td>
		</tr>
		<!-- IF END 'change_cont' -->
		<!-- IF START 'cont.cont_url' -->
		<tr>
			<th>조회URL</th>
			<td colspan="3">{{cont.cont_url}}</td>
		</tr>
		<!-- IF END 'cont.cont_url' -->
	</table>
</div>

<!-- LOOP START 'sign_template' -->
<input type="hidden" name="sign_seq" value="{{sign_template.sign_seq}}"/>
<input type="hidden" name="signer_name" value="{{sign_template.signer_name}}"/>
<input type="hidden" name="signer_max" value="{{sign_template.signer_max}}"/>
<input type="hidden" name="member_type" value="{{sign_template.member_type}}"/>
<input type="hidden" name="cust_type" value="{{sign_template.cust_type}}"/>

<div class="div_table">
	<div class="util-row">
	    <div class="push-left">
	        <h3>{{sign_template.signer_name}}</h3>
	    </div>
	    <!-- IFC START 'sign_template.cust_type!=01' -->
	    <div class="push-right">
	    	<button type="button" class="sbtn ico-add auth_css" onclick="addClient('{{sign_template.sign_seq}}','{{sign_template.signer_max}}','{{sign_template.signer_name}}')"><span></span>추가</button>
	    </div>
	    <!-- IFC END 'sign_template.cust_type!=01' -->
	</div>
	<div style="border-top: 2px solid #333;border-bottom: 1px solid #e0e0e0;">
	<table id="comp_grid_{{sign_template.sign_seq}}" class="inner_table" style="border-top:0px;border-bottom:0px">
		<thead>
			<tr style="display: none;"><td style="height: 0px;border:0px;"></td></tr>
		</thead>
		<tbody>
		</tbody>
	</table>
	</div>
</div>
<!-- LOOP END 'sign_template' -->

<!-- IFNOT START 'modify' -->
<div class="div_table">
	<div class="util-row">
	    <div class="push-left">
	        <h3>계약서류</h3>
	    </div>
	    <div class="push-right">
	    	<button type="button" class="sbtn ico-add auth_css" onclick="addCfileRow();"><span></span>추가</button>
	    </div>
	</div>
	<table id="cfile_grid" style="table-layout: fixed;">
		<colgroup>
			<col width="10%"/>
			<col width="35%"/>
			<col width="45%"/>
			<col width="10%"/>
		</colgroup>
		<thead>
			<tr>
				<th>파일구분</th>
				<th>계약서류명</th>
				<th>첨부</th>
				<th>삭제</th>
			</tr>
		</thead>
		<tbody>
			<!-- LOOP START 'cfile' -->
			<tr>
				<td align="center"><span class="{{cfile.auto_class}}">{{cfile.auto_str}}</span></td>
				<td><input type="text" name="cfile_doc_name" value="{{cfile.doc_name}}" class="in_readonly" {{cfile.doc_name_readonly}} style="width:98%" hname="계약서류명" required="Y" /></td>
				<td align="right">
					<!-- IF START 'cfile.file_name' -->
						<!-- IF START 'cfile.modfiy_file' -->
						<input type="file" name="cfile_{{cfile.cfile_seq}}" style="width:150px" onchange="javascript:setDocName(this,{{cfile.cfile_seq}});"/>
						<!-- IF END 'cfile.modfiy_file' -->
				 		{{cfile.file_size_str}}&nbsp;&nbsp;
				 		<button type="button" class="sbtn ico-print" onclick="{{cfile.down_script}}"><span></span>{{cfile.btn_name}}</button>
						<!-- IF END 'cfile.file_name' -->
					<!-- IFNOT START 'cfile.file_name' -->
					<input type="file" name="cfile_{{cfile.cfile_seq}}" style="width:98%" hname="계약서류 파일" required="Y" onchange="javascript:setDocName(this,{{cfile.cfile_seq}});"/>
					<!-- IFNOT END 'cfile.file_name' -->
					<input type="hidden" name="cfile_seq" value="{{cfile.cfile_seq}}"/>
					<input type="hidden" name="cfile_auto_type" value="{{cfile.auto_type}}"/>
				</td>
				<td align="center">
					<!-- IFNOT START 'cfile.auto' -->
					<button type="button" class="sbtn ico-delete auth_css" onclick="cfile_grid.del(this);"><span></span>삭제</button>
					<!-- IFNOT END 'cfile.auto' -->
				</td>
			</tr>
			<!-- LOOP END 'cfile' -->
		</tbody>
	</table>
</div>
<!-- IFNOT END 'modify' -->

<!-- IF START 'modify' -->
<div class="div_table">
	<div class="util-row">
	    <div class="push-left">
	        <h3>계약서류<!-- <span class="caution-text">(※ 계약과 관련된 문서 첨부, 예: 특수조건,계약내역,...)</span> --></h3>
	    </div>
	    <!-- <div class="push-right">
	    	<button type="button" class="sbtn ico-add auth_css" onclick="addCfileRow();"><span></span>추가</button>
	    </div> -->
	</div>
	<table id="cfile_grid" style="table-layout: fixed;">
		<colgroup>
			<col width="10%"/>
			<col width="35%"/>
			<col width="45%"/>
			<!-- <col width="10%"/> -->
		</colgroup>
		<thead>
			<tr>
				<th>파일구분</th>
				<th>계약서류명</th>
				<th>첨부</th>
				<!-- <th>삭제</th> -->
			</tr>
		</thead>
		<tbody>
			<!-- LOOP START 'cfile' -->
			<tr>
				<td align="center"><span class="{{cfile.auto_class}}">{{cfile.auto_str}}</span></td>
				<td><input type="text" name="cfile_doc_name" value="{{cfile.doc_name}}" class="in_readonly" {{cfile.doc_name_readonly}} style="width:98%" hname="계약서류명" required="Y" /></td>
				<td align="right">
					<!-- IF START 'cfile.file_name' -->
						<!-- IF START 'cfile.modfiy_file' -->
						<input type="file" name="cfile_{{cfile.cfile_seq}}" style="width:150px"/>
						<!-- IF END 'cfile.modfiy_file' -->
				 		{{cfile.file_size_str}}&nbsp;&nbsp;
				 		<button type="button" class="sbtn ico-print" onclick="{{cfile.down_script}}"><span></span>{{cfile.btn_name}}</button>
						<!-- IF END 'cfile.file_name' -->
					<!-- IFNOT START 'cfile.file_name' -->
					<input type="file" name="cfile_{{cfile.cfile_seq}}" style="width:98%" hname="계약서류 파일" required="Y" />
					<!-- IFNOT END 'cfile.file_name' -->
					<input type="hidden" name="cfile_seq" value="{{cfile.cfile_seq}}"/>
					<input type="hidden" name="cfile_auto_type" value="{{cfile.auto_type}}"/>
				</td>
				<!-- <td align="center">
					<!-- IFNOT START 'cfile.auto' -->
					<button type="button" class="sbtn ico-delete auth_css" onclick="cfile_grid.del(this);"><span></span>삭제</button>
					<!-- IFNOT END 'cfile.auto' -->
				</td> -->
			</tr>
			<!-- LOOP END 'cfile' -->
		</tbody>
	</table>
</div>
<!-- IF END 'modify' -->

<div class="div_table">
	<div class="util-row">
	    <div class="push-left">
	        <h3>
	        	구비서류
			  	<span class="caution-text">※ 업체에 요구하는 서류. &nbsp;예) 사업자등록증</span>
	        </h3>
	    </div>
	    <div class="push-right">
		  	<button type="button" class="sbtn ico-add auth_css" onclick="addRfileRow('1')"><span></span>추가</button>
	    </div>
	</div>

<table id="layer_uncheck" cellpadding="0" cellspacing="0" style="border-collapse:collapse; background-color: #FFFFFF; border:1px solid #AAAAAA; width:200px; height:20px; position:absolute; display:none">
<tr>
	<td align="center" bgcolor="#CCCCCC">사유</td>
</tr>
<tr>
	<td>
		<input type="text" name="rfile_comment" id="rfile_comment" style="width:100%" onkeydown="if(event.keyCode==13){ fPopCommentClose('1'); return false;}"/>
	</td>
</tr>
<tr>
	<td align="center">
		<button type="button" class="sbtn ico-save auth_css" onclick="fPopCommentClose('1')"><span></span>확인</button>
		<button type="button" class="sbtn ico-cancel" onclick="fPopCommentClose('1')"><span></span>취소</button>
	</td>
</tr>
</table>

	<table id="rfile_grid">
		<colgroup>
			<col width="10%"/>
			<col width="75%"/>
			<col width="15%"/>
		</colgroup>
		<thead>
		<tr>
			<th>필수여부</th>
			<th>문서명</th>
			<th>삭제</th>
		</tr>
		</thead>
		<tbody>
			<!-- LOOP START 'rfile' -->
				<!-- IFNOT START 'rfile.file_name' -->
				<tr>
					<td align="center">
						<input type="checkbox" name="attch" onclick="chkClick(this,'form1','attch_yn','Y')" {{rfile.attch}} {{rfile.attch_disabled}}>
						<!-- IF START 'rfile.attch_disabled_btn' -->
						<button type="button" class="uncheck sbtn auth_css" onclick="fPopComment(this.parentNode);">해제</button>
						<!-- IF END 'rfile.attch_disabled_btn' -->
						<input type="hidden" name="uncheck_text" value="{{rfile.uncheck_text}}">
						<input type="hidden" name="attch_yn" value="{{rfile.attch_yn}}">
						<input type="hidden" name="reg_type" value="{{rfile.reg_type}}">
						<input type="hidden" name="allow_ext" value="{{rfile.allow_ext}}">
						<input type="hidden" name="sample_file_path" value="{{rfile.sample_file_path}}">
						<input type="hidden" name="sample_file_name" value="{{rfile.sample_file_name}}">
					</td>
					<td align="left">
						<input type="hidden" name="attch_type" value="1">
						<input type="hidden" name="rfile_seq" value="{{rfile.rfile_seq}}">
						<!-- IF START 'rfile.sample_file_name' -->
						<input type="text" name="rfile_doc_name" value="{{rfile.doc_name}}" class="{{rfile.doc_name_class}}" {{rfile.doc_name_readonly}} style="width:85%;" required="Y" hname="구비서류명">
						<input type="button" class="down4" value="샘플파일" onclick="filedown('file.path.bcont_template','{{rfile.sample_file_path}}{{rfile.sample_file_name}}','{{rfile.sample_file_name}}')"/>
						<!-- IF END 'rfile.sample_file_name' -->
						<!-- IFNOT START 'rfile.sample_file_name' -->
						<input type="text" name="rfile_doc_name" value="{{rfile.doc_name}}" class="{{rfile.doc_name_class}}" {{rfile.doc_name_readonly}} style="width:98%;" required="Y" hname="구비서류명">
						<!-- IFNOT END 'rfile.sample_file_name' -->
						<!-- IF START 'rfile.allow_ext' -->
						<span class="caution-text"> ※ {{rfile.allow_ext}} 파일만 첨부 가능</span>
						<!-- IF END 'rfile.allow_ext' -->
					</td>
					<td align="center">
						<!-- IF START 'rfile.del_btn_yn' -->
						<button type="button" class="sbtn ico-delete auth_css" onclick="rfile_grid.del(this);"><span></span>삭제</button>
						<!-- IF END 'rfile.del_btn_yn' -->
					</td>
				</tr>
				<!-- IFNOT END 'rfile.file_name' -->
				<!-- IF START 'rfile.file_name' -->
				<tr>
					<td align="center">
						<input type="checkbox" name="attch" onclick="chkClick(this,'form1','attch_yn','Y')">
						<input type="hidden" name="uncheck_text">
						<input type="hidden" name="attch_yn">
						<input type="hidden" name="reg_type" value="{{rfile.reg_type}}">
						<input type="hidden" name="allow_ext" value="{{rfile.allow_ext}}">
						<input type="hidden" name="sample_file_path" value="{{rfile.sample_file_path}}">
						<input type="hidden" name="sample_file_name" value="{{rfile.sample_file_name}}">
					</td>
					<td align="left">
						<input type="hidden" name="attch_type" value="3">
						<input type="hidden" name="rfile_seq" value="{{rfile.rfile_seq}}">
						<input type="text" name="rfile_doc_name" value="{{rfile.doc_name}}" style="width:70%;" required="Y" hname="구비서류명" value="{{rfile.doc_name}}"> &nbsp;&nbsp;{{rfile.str_file_size}}
						&nbsp;<button type="button" class="sbtn ico-download" onclick="filedown('file.path.bcont_pdf','{{rfile.file_path}}{{rfile.file_name}}','{{rfile.doc_name}}.{{rfile.file_ext}}')"><span></span>다운로드</button>
						<input type="hidden" name="rfile_file_path_{{rfile.rfile_seq}}" value="{{rfile.file_path}}">
						<input type="hidden" name="rfile_file_name_{{rfile.rfile_seq}}" value="{{rfile.file_name}}">
						<input type="hidden" name="rfile_file_size_{{rfile.rfile_seq}}" value="{{rfile.file_size}}">
						<input type="hidden" name="rfile_file_ext_{{rfile.rfile_seq}}" value="{{rfile.file_ext}}">
					</td>	
					<td align="center"><button type="button" class="sbtn ico-delete auth_css" onclick="rfile_grid.del(this);"><span></span>삭제</button></td>
				</tr>
				<!-- IF END 'rfile.file_name' -->
			<!-- LOOP END 'rfile' -->
		</tbody>
	</table>
</div>

<!-- IF START 'efile_yn' -->
<div class="div_table">
	<div class="util-row">
	    <div class="push-left">
	        <h3>내부관리서류<span class="caution-text">※ 계약과 관련된 내부관리서류 첨부, 내부에서만 조회 가능.</span></h3>
	    </div>
	    <div class="push-right">
	        <button type="button" class="sbtn ico-add auth_css" onclick="addEfileRow();"><span></span>추가</button>
	    </div>
	</div>
	<table id="efile_grid">
		<colgroup>
			<col width="15%"/>
			<col width="40%"/>
			<col width="35%"/>
			<col width="10%"/>
		</colgroup>
		<thead>
		<tr>
			<th>관리유형</th>
			<th>문서명</th>
			<th>첨부</th>
			<th>삭제</th>
		</tr>
		</thead>
		<tbody>
			<!-- LOOP START 'efile' -->
			<tr>
				<td align="center">{{efile.str_reg_type}}<input type="hidden" name="efile_reg_type" value="{{efile.reg_type}}"/></td>
				<td><input type="text" name="efile_doc_name" value="{{efile.doc_name}}" class="{{efile.doc_name_class}}" {{efile.doc_name_readonly}} style="width:98%" hname="계약서류명" {{efile.required}} /></td>
				<td align="center">
					<!-- IF START 'efile.file_name' -->
					<span id="div_efile_{{efile.efile_seq}}">
					<!-- <input type="file" name="efile_{{efile.efile_seq}}" style="width:200px" hname="관리서류 파일"/> -->
				 	{{efile.file_size_str}}&nbsp;&nbsp;
				 	<button type="button" class="sbtn ico-download" onclick="{{efile.down_script}}"><span></span>다운로드</button>
				 	</span>
					<!-- IF END 'efile.file_name' -->
					<!-- IFNOT START 'efile.file_name' -->
					<input type="file" name="efile_{{efile.efile_seq}}" style="width:98%" hname="관리서류 파일" {{efile.required}} />
					<!-- IFNOT END 'efile.file_name' -->
					<input type="hidden" name="efile_seq" value="{{efile.efile_seq}}"/>
					<input type="hidden" name="efile_del_yn" id="efile_del_yn_{{efile.efile_seq}}">
				</td>
				<td>
					<!-- IF START 'efile.del_yn10' -->
					<button type="button" class="sbtn ico-delete auth_css" onclick="delEfile('{{efile.efile_seq}}','10')"><span></span>삭제</button>
					<!-- IF END 'efile.del_yn10' -->
					<!-- IF START 'efile.del_yn20' -->
					<button type="button" class="sbtn ico-delete auth_css" onclick="delEfile('{{efile.efile_seq}}','20')"><span></span>삭제</button>
					<!-- IF END 'efile.del_yn20' -->
					<!-- IF START 'efile.del_yn30' -->
					<button type="button" class="sbtn ico-delete auth_css" onclick="efile_grid.del(this);"><span></span>삭제</button>
					<!-- IF END 'efile.del_yn30' -->
				</td>
			</tr>
			<!-- LOOP END 'efile' -->
		</tbody>
	</table>
</div>
<!-- IF END 'efile_yn' -->

<!-- IF START 'modify' -->
<!-- IF START '_auth._CONT_SHARE_ABLE' -->
<iframe name="ifm_cont_share" id="ifm_cont_share" src="./ifm_cont_share.jsp?{{query}}" frameborder="0" width="100%" scrolling="no"></iframe>
<br>
<!-- IF END '_auth._CONT_SHARE_ABLE' -->
<!-- IF END 'modify' -->

<div class="btn-group-wrap">
	<!-- IF START 'btnSave' -->
	<button type="submit" class="btn color ico-save auth_css"><span></span>저장</button>
	<!-- IF END 'btnSave' -->
	
	<!-- IF START 'btnInvCsltSap' -->
	<button type="button" class="btn ico-request" onclick="javascript:addInvCsltSap('{{userId}}','{{formId}}');"><span></span>투자품의목록</button>
	<!-- IF END 'btnInvCsltSap' -->

	<!-- IFNOT START 'modify' -->
	<button type="button" class="btn color ico-cancel" onclick="history.go(-1);"><span></span>취소</button>
	<!-- IFNOT END 'modify' -->

	<!-- IF START 'modify' -->
	<!-- IFNOT START 'btnSend' -->
	<!-- <button type="button" class="btn color ico-request auth_css" onclick="sendAgree(this.form)"><span></span>검토요청</button> -->
	<!-- IFNOT END 'btnSend' -->
	<!-- IF START 'btnSend' -->
	<button type="button" class="btn color ico-request auth_css" onclick="javascript:checkStampYn();"><span></span>서명요청</button>
	<!-- IF END 'btnSend' -->
	<!-- IF START 'btnAppr' -->
	<button type="button" class="btn color ico-request auth_css" onclick="location.href='contract_approval_send.jsp?jobID=ECS12&{{query}}';"><span></span>결재상신</button>
	<!-- IF END 'btnAppr' -->
	<button type="button" class="btn color ico-delete auth_css" onclick="if(confirm('삭제 하시겠습니까?')){location.href='contract_delete.jsp?{{query}}'}"><span></span>삭제</button>
	<button type="button" class="btn color ico-list" onclick="location.href='contract_writing_list.jsp?{{list_query}}';"><span></span>목록으로</button>
	<!-- IF END 'modify' -->
</div>

<br/><br/>

<!-- 계약서 서식 -->
<div style="text-align:right;margin: 5px 0px" >	
※<span style="background-color:yellow;text-align:center">노랑색</span>은 필수입력사항입니다.
</div>

<div>
	<div class="cont_tab">
        <input type="hidden" name="cont_sub_name" value="{{template.template_name}}">
        <input type="hidden" name="cont_sub_style" value="{{template.template_style}}">
        <input type="hidden" name="gubun" value="10">
        <input type="hidden" name="sub_seq" value="0">
        <input type="hidden" name="option_yn_0" value="A">
		<span class="tab_on" id="tab_0" onClick="tabView(0)">{{template.template_name}}</span>
		<!-- IF START 'modify' -->
			<!-- LOOP START 'contSub' -->
				<!-- IFNOT START 'contSub.hidden' -->
				<span class="tab_off" style="margin-left:-5" id="tab_{{contSub.sub_seq}}" onClick="tabView({{contSub.sub_seq}})">
				<!-- IF START 'contSub.option_yn' -->
				<input type="checkbox" name="option_yn_{{contSub.sub_seq}}" value="Y" style="margin:-2px 0 0 0; vertical-align:middle;">
				<!-- IF END 'contSub.option_yn' -->
				<!-- IFNOT START 'contSub.option_yn' -->
				<input type="hidden" name="option_yn_{{contSub.sub_seq}}" value="A">
				<!-- IFNOT END 'contSub.option_yn' -->
				{{contSub.cont_sub_name}}</span>
				<!-- IFNOT END 'contSub.hidden' -->
				<!-- IF START 'contSub.hidden' -->
				<span class="tab_off" id="tab_{{contSub.sub_seq}}" style="display:none" onClick="tabView({{contSub.sub_seq}})">{{contSub.cont_sub_name}}</span>
				<!-- IF END 'contSub.hidden' -->
				<input type="hidden" name="cont_sub_name" value="{{contSub.cont_sub_name}}"><input type="hidden" name="cont_sub_style" value="{{contSub.cont_sub_style}}"><input type="hidden" name="gubun" value="{{contSub.gubun}}"><input type="hidden" name="sub_seq" value="{{contSub.sub_seq}}">
			<!-- LOOP END 'contSub' -->
		<!-- IF END 'modify' -->
		<!-- IFNOT START 'modify' -->
			<!-- LOOP START 'templateSub' -->
				<!-- IFNOT START 'templateSub.hidden' -->
				<span class="tab_off" style="margin-left:-5" id="tab_{{templateSub.sub_seq}}" onClick="tabView({{templateSub.sub_seq}})">
				<!-- IF START 'templateSub.option_yn' -->
				<input type="checkbox" name="option_yn_{{templateSub.sub_seq}}" value="Y"<!-- IFC START 'templateSub.option_yn==Y' --> checked<!-- IFC END 'templateSub.option_yn==Y' --> style="margin:-2px 0 0 0; vertical-align:middle;">
				<!-- IF END 'templateSub.option_yn' -->
				<!-- IFNOT START 'templateSub.option_yn' --><input type="hidden" name="option_yn_{{templateSub.sub_seq}}" value="A">
				<!-- IFNOT END 'templateSub.option_yn' -->
				{{templateSub.template_name}}
				</span>
				<!-- IFNOT END 'templateSub.hidden' -->
				<!-- IF START 'templateSub.hidden' -->
				<span class="tab_off" id="tab_{{templateSub.sub_seq}}" style="display:none" onClick="tabView({{templateSub.sub_seq}})">{{templateSub.template_name}}</span>
				<!-- IF END 'templateSub.hidden' -->
				<input type="hidden" name="cont_sub_name" value="{{templateSub.template_name}}">
				<input type="hidden" name="cont_sub_style" value="{{templateSub.template_style}}">
				<input type="hidden" name="gubun" value="{{templateSub.gubun}}">
				<input type="hidden" name="sub_seq" value="{{templateSub.sub_seq}}">
			<!-- LOOP END 'templateSub' -->
		<!-- IFNOT END 'modify' -->
    </div>
	<div class="cont_warp">
			<div id="__html">
				<div style="{{template.template_style}}; padding-top: 10px" id="__html_0">
					<!-- IF START 'modify' -->
					{{cont.cont_html}}
					<!-- IF END 'modify' -->
					<!-- IFNOT START 'modify' -->
					{{template.template_html}}
					<!-- IFNOT END 'modify' -->
				</div>
				<!-- IF START 'modify' -->
					<!-- LOOP START 'contSub' -->
					<div style="{{contSub.cont_sub_style}}; padding-top: 10px; display:none" id="__html_{{contSub.sub_seq}}">
						{{contSub.cont_sub_html}}
					</div>
				<!-- LOOP END 'contSub' -->
			<!-- IF END 'modify' -->

			<!-- IFNOT START 'modify' -->
				<!-- LOOP START 'templateSub' -->
				<div style="{{templateSub.template_style}}; padding-top: 10px; display:none" id="__html_{{templateSub.sub_seq}}">
					{{templateSub.template_html}}
				</div>
				<!-- LOOP END 'templateSub' -->
			<!-- IFNOT END 'modify' -->
			</div>
	</div>		
</div>
</form>
{{form_script}}

<form name="comp_form" method="post">
<table id="comp_template" style="display: none">
	<tr>
		<td>
			<input type="hidden" name="member_no"/>
			<input type="hidden" name="vendcd"/>
			<input type="hidden" name="post_code"/>
			<input type="hidden" name="member_slno"/>
			<input type="hidden" name="cust_sign_seq"/>
			<input type="hidden" name="jumin_no"/>
			<input type="hidden" name="cust_detail_code"/>
			<input type="hidden" name="cust_gubun" value="01"/>
			<input type="hidden" name="member_gubun"/>
			<input type="hidden" name="condition"/>
			<input type="hidden" name="category"/>
			<input type="hidden" name="division"/><!-- 부서명 추가 by jun -->
		
			<div style="width:100%;padding:5px" align="right" id="comp_grid_del_div_[[seq]]">
				<button type="button" class="sbtn ico-delete auth_css" onclick="comp_grid_[[seq]].del(this)"><span></span>삭제</button>
			</div>
			<table class="inner_table">
				<colgroup>
					<col width="10%"/>
					<col width="23%"/>
					<col width="10%"/>
					<col width="23%"/>
					<col width="10%"/>
					<col width="24%"/>
				</colgroup>
				<tr>
					<th>주소</th>
					<td colspan="3"><input type="text" name="address" id="comp_grid_address_[[seq]]" style="width:98%" maxlength="100" hname="주소" required="Y" onblur="setCustArea()"/></td>
					<th>담당자</th>
					<td><input type="text" name="user_name" id="comp_grid_user_name_[[seq]]" style="width:98%" maxlength="30" hname="담당자" onblur="setCustArea()"/></td>
				</tr>
				<tr>
					<th>상호</th>
					<td colspan="3"><input type="text" name="member_name" id="comp_grid_member_name_[[seq]]" style="width:98%" maxlength="100" hname="상호" required="Y" onblur="setCustArea()"/></td>
					<th>이메일</th>
					<td><input type="text" name="email" id="comp_grid_email_[[seq]]" style="width:98%" maxlength="150" hname="이메일" option="email" onblur="setCustArea()"/></td>
				</tr>
				<tr>
					<th>대표자</th>
					<td><input type="text" name="boss_name" id="comp_grid_boss_name_[[seq]]" style="width:98%" maxlength="50" hname="대표자" required="Y" onblur="setCustArea()"/></td>
					<th>일반전화</th>
					<td><input type="text" name="tel_num" id="comp_grid_tel_num_[[seq]]" style="width:98%" maxlength="20" hname="일반전화" onblur="setCustArea()"/></td>
					<th id="comp_grid_hp_th_txt_[[seq]]">휴대폰</th>
					<td id="comp_grid_hp_td_txt_[[seq]]">
						<input type="text" name="hp1" id="comp_grid_hp1_[[seq]]" maxlength="3" style="width:28%;ime-mode:disabeld" hname="휴대폰" onkeydown="num_only()" onkeypress="num_only()" onblur="setCustArea()"/><span id="hp_bar1_[[seq]]">-</span>
						<input type="text" name="hp2" id="comp_grid_hp2_[[seq]]" maxlength="4" style="width:30%;ime-mode:disabeld" hname="휴대폰" onkeydown="num_only()" onkeypress="num_only()" onblur="setCustArea()"/><span id="hp_bar2_[[seq]]">-</span>
						<input type="text" name="hp3" id="comp_grid_hp3_[[seq]]" maxlength="4" style="width:30%;ime-mode:disabeld" hname="휴대폰" onkeydown="num_only()" onkeypress="num_only()" onblur="setCustArea()"/>
					</td>
				</tr>
			</table>
		</td>
	</tr>
</table>
</form>

<form name="person_form" method="post">
<table id="person_template" style="display:none;">
	<tr>
		<td>
			<input type="hidden" name="member_no"/>
			<input type="hidden" name="vendcd"/>
			<input type="hidden" name="post_code"/>
			<input type="hidden" name="member_slno"/>
			<input type="hidden" name="cust_sign_seq"/>
			<input type="hidden" name="user_name"/>
			<input type="hidden" name="boss_name"/>
			<input type="hidden" name="jumin_no"/>
			<input type="hidden" name="cust_detail_code"/>
			<input type="hidden" name="cust_gubun" value="02"/>
			<input type="hidden" name="member_gubun"/>
			<input type="hidden" name="condition"/>
			<input type="hidden" name="category"/>
		
			<div style="width:100%;padding:5px" align="right">
				<button type="button" class="sbtn ico-delete auth_css" onclick="comp_grid_[[seq]].del(this)"><span></span>삭제</button>
			</div>
			<table class="inner_table">
				<colgroup>
					<col width="10%"/>
					<col width="57%"/>
					<col width="10%"/>
					<col width="23%"/>
				</colgroup>
				<tr>
					<th>이름</th>
					<td><input type="text" name="member_name" style="width:98%" maxlength="100" hname="상호" required="Y" onblur="setCustArea()"/></td>
					<th>부서</th><!-- 	//부서명 추가 by jun -->
					<td><input type="text" name="division" style="width:98%" maxlength="100" hname="부서" required="Y" onblur="setCustArea()"/></td>
				</tr>
				<tr>
					<th>주소</th>
					<td><input type="text" name="address" style="width:98%" maxlength="100" hname="주소" required="Y" onblur="setCustArea()"/></td>
					<th>이메일</th>
					<td><input type="text" name="email" style="width:98%" maxlength="150" hname="이메일" option="email" required="Y" onblur="setCustArea()"/></td>
				</tr>
				<tr>
					<th>일반전화</th>
					<td><input type="text" name="tel_num" style="width:98%" maxlength="20" onblur="setCustArea()"/></td>
					<th>휴대폰</th>
					<td>
						<input type="text" name="hp1" maxlength="3" style="width:28%;ime-mode:disabeld" hname="휴대폰" required="Y" onkeydown="num_only()" onkeypress="num_only()" onblur="setCustArea()"/>-
						<input type="text" name="hp2" maxlength="4" style="width:30%;ime-mode:disabeld" hname="휴대폰" required="Y" onkeydown="num_only()" onkeypress="num_only()" onblur="setCustArea()"/>-
						<input type="text" name="hp3" maxlength="4" style="width:30%;ime-mode:disabeld" hname="휴대폰" required="Y" onkeydown="num_only()" onkeypress="num_only()" onblur="setCustArea()"/>
					</td>
				</tr>
			</table>
		</td>
	</tr>
</table>
</form>

<table id="cfile_template" style="display:none">
	<tr>
		<td align="center">직접첨부</td>
		<td><input type="text" name="cfile_doc_name" style="width:98%" hname="계약서류명" required="Y" /></td>
		<td>
			<input type="file" name="cfile_[[seq]]" style="width:98%" hname="계약서류 파일" required="Y" onchange="javascript:setDocName(this,[[seq]]);"/>
			<input type="hidden" name="cfile_seq" value="[[seq]]"/>
			<input type="hidden" name="cfile_auto_type" value=""/>
		</td>
		<td><button type="button" value="삭제" class="sbtn ico-delete auth_css" onclick="cfile_grid.del(this);"><span></span>삭제</button></td>
	</tr>
</table>

<table id="rfile_template" style="display:none">
	<tr>
		<td>
			<input type="checkbox" name="attch" onclick="chkClick(this,'form1','attch_yn','Y')">
			<input type="hidden" name="uncheck_text">
			<input type="hidden" name="sample_file_path">
			<input type="hidden" name="sample_file_name">
			<input type="hidden" name="attch_yn">
			<input type="hidden" name="reg_type" value="20">
			<input type="hidden" name="allow_ext" value="">
		</td>
		<td>
			<input type="hidden" name="attch_type" value="1">
			<input type="hidden" name="rfile_seq" value="[[seq]]">
			<input type="text" name="rfile_doc_name" style="width:470px" required="Y" hname="구비서류명">
		</td>
		<td><button type="button" class="sbtn ico-delete auth_css" onclick="rfile_grid.del(this);"><span></span>삭제</button></td>
	</tr>
</table>


<table id="rfile_template2" style="display:none">
	<tr>
		<td>
			<input type="checkbox" name="attch" onclick="chkClick(this,'form1','attch_yn','Y')">
			<input type="hidden" name="uncheck_text">
			<input type="hidden" name="sample_file_path">
			<input type="hidden" name="sample_file_name">
			<input type="hidden" name="attch_yn">
			<input type="hidden" name="reg_type" value="20">
		</td>
		<td>
			<input type="hidden" name="rfile_seq" value="[[seq]]">
			<input type="text" name="rfile_doc_name" style="width:235px" required="Y" hname="구비서류명">
			<input type="file" name="rfile_[[seq]]"  hname="첨부파일" style="width:235px" required="Y" hname="구비서류"/>
			<input type="hidden" name="attch_type" value="2">
			<input type="hidden" name="allow_ext" value="">
		</td>
		<td><button type="button" class="sbtn ico-delete auth_css" onclick="rfile_grid.del(this);"><span></span>삭제</button></td>
	</tr>
</table>


<table id="efile_template" style="display:none">
	<tr>
		<td align="center">추가첨부<input type="hidden" name="efile_reg_type" value="30"/></td>
		<td><input type="text" name="efile_doc_name" style="width:98%" hname="문서명" required="Y" /></td>
		<td>
			<input type="hidden" name="efile_del_yn">
			<input type="file" name="efile_[[seq]]" style="width:80%" hname="문서 파일" required="Y" />
			<input type="hidden" name="efile_seq" value="[[seq]]"/>
		</td>
		<td>
			<button type="button" class="sbtn ico-delete auth_css" onclick="efile_grid.del(this);"><span></span>삭제</button>
		</td>
	</tr>
</table>


<script language="javascript">
document.addEventListener("DOMContentLoaded", function(){
	chgContDate();
});

function sendAgree(f) {
	if (validate(f)) {
		if (confirm('담당자에게 검토요청 하시겠습니까?\n\n수정한 내용이 있을 경우 저장 후 검토요청 하세요.')) location.href = 'contract_agree.jsp?{{query}}';
	}
} 

function formSubmit(f) {
	if (validate(f)) {
		if (f['cont_html_onsubmit']) {
            Function("contValid=" + f['cont_html_onsubmit'].value + "();")();
            if (contValid == false)
            	return false;
		}
		
		var group_cnt = f['sign_seq'].length;
		for (var i=0; i<group_cnt; i++){
			var table = document.getElementById("comp_grid_" + f["sign_seq"][i].value);
			var row_cnt = table.rows.length-1;
			if (row_cnt == 0) {
				alert(f['signer_name'][i].value + "에 해당하는 업체를 선택해 주세요.");
				return false;
			}
		}

		//나포함 여부 체크
		var my_chk = false;
		var cust_cnt = f['member_no'].length;
		for (var i=0; i<cust_cnt; i++) {
			if ("{{_auth._MEMBER_NO}}" == f['member_no'][i].value) {
				my_chk = true;
				break;
			}
		}
		if (!my_chk) {
			alert("로그인한 업체는 계약관계사에 반드시 포함 되어야 합니다.");
			return false;
		}
		
		if (!{{modify}}) {
			if (document.getElementById("stamp_type_y").checked == true) {
				if (!confirm("인지세 사용 계약입니다.\n대상이 아닌 경우, 인지세 사용여부를 변경하여주세요.\n저장 하시겠습니까?")) return false;
			} else {
				if (!confirm("저장 하시겠습니까??")) return false;
			}
		} else {
			if (!confirm("저장 하시겠습니까?")) return false;
		}

		setDivInputValue("__html");
		splitHtml(f, 'cont_html', false);
		splitHtml(f, 'cont_sub_file', false);
		splitHtml(f, 'cont_html_rm', true);
		return true;
	}
	return false;
}

/*변경구분에 따른 동작*/
function chgChangeGubun(val) {
	var f = document.forms['form1'];
	if (f['chg_func']) eval(f['chg_func'].value);
}

function setCustArea(rowIndex){
	var f = document.forms['form1'];
	if (f['member_name'].type == "text") {
		// 업체 한개 일때(갑만 있을 경우)
		var cust_sign_seq = f['cust_sign_seq'].value;
		replaceInput(f["member_name"], 'cust_name_area_' + cust_sign_seq, document.all.__html);
		replaceInput(f['post_code'].value, 'post_code_' + cust_sign_seq, document.all.__html);
		replaceInput(f['post_code'].value.substring(0, 3), 'post_code1_' + cust_sign_seq, document.all.__html);
		replaceInput(f['post_code'].value.substring(3), 'post_code2_' + cust_sign_seq, document.all.__html);
		replaceInput(f['address'], 'address_area_' + cust_sign_seq, document.all.__html);
		replaceInput(f['boss_name'], 'boss_name_area_' + cust_sign_seq, document.all.__html);
		replaceInput(f['tel_num'], 'telnum_area_' + cust_sign_seq, document.all.__html);
		replaceInput(f['vendcd'].value.substring(0, 3), 'vendcd1_' + cust_sign_seq, document.all.__html);
		replaceInput(f['vendcd'].value.substring(3, 5), 'vendcd2_' + cust_sign_seq, document.all.__html);
		replaceInput(f['vendcd'].value.substring(5), 'vendcd3_'+cust_sign_seq, document.all.__html);
		replaceInput(f['member_slno'].value.substring(0, 6), 'member_slno1_' + cust_sign_seq, document.all.__html);
		replaceInput(f['member_slno'].value.substring(6), 'member_slno2_' + cust_sign_seq, document.all.__html);
		replaceInput(f['user_name'], 'user_name_area_' + cust_sign_seq, document.all.__html);
		replaceInput(f['hp1'], 'hp1_' + cust_sign_seq, document.all.__html);
		replaceInput(f['hp2'], 'hp2_' + cust_sign_seq, document.all.__html);
		replaceInput(f['hp3'], 'hp3_' + cust_sign_seq, document.all.__html);
		replaceInput(f['email'], 'email_area_' + cust_sign_seq, document.all.__html);
	} else {
		// 업체 2개이상 일때(을을 지정한 경우)
		if (f['cont_html_chg_client']) {
			eval(f['cont_html_chg_client'].value);
			if (f['member_name'].length < 2) return;
		}
		var cust_sign_seq = "";
		var sub_cnt = 0;
		for (var i=0 ; i<f['member_name'].length; i++) {
			if (cust_sign_seq != f['cust_sign_seq'][i].value) {
				cust_sign_seq = f['cust_sign_seq'][i].value;
				sub_cnt = 0;
			} else {
				sub_cnt = sub_cnt+1;
			}
			var seq = f['cust_sign_seq'][i].value;
			if (sub_cnt > 0) seq = f['cust_sign_seq'][i].value + "_" + sub_cnt;
			
			replaceInput(f["member_name"][i], 'cust_name_area_' + seq, document.all.__html);
			replaceInput(f['post_code'][i].value, 'post_code_' + seq, document.all.__html);
			replaceInput(f['post_code'][i].value.substring(0, 3), 'post_code1_' + seq, document.all.__html);
			replaceInput(f['post_code'][i].value.substring(3), 'post_code2_' + seq, document.all.__html);
			replaceInput(f['address'][i], 'address_area_' + seq, document.all.__html);
			replaceInput(f['boss_name'][i], 'boss_name_area_' + seq, document.all.__html);
			replaceInput(f['tel_num'][i], 'telnum_area_' + seq, document.all.__html);
			replaceInput(f['vendcd'][i].value.substring(0, 3), 'vendcd1_' + seq, document.all.__html);
			replaceInput(f['vendcd'][i].value.substring(3, 5), 'vendcd2_' + seq, document.all.__html);
			replaceInput(f['vendcd'][i].value.substring(5), 'vendcd3_' + seq, document.all.__html);
			replaceInput(f['member_slno'][i].value.substring(0, 6), 'member_slno1_' + seq, document.all.__html);
			replaceInput(f['member_slno'][i].value.substring(6), 'member_slno2_' + seq, document.all.__html);
			replaceInput(f['user_name'][i], 'user_name_area_' + seq, document.all.__html);
			replaceInput(f['hp1'][i], 'hp1_' + seq, document.all.__html);
			replaceInput(f['hp2'][i], 'hp2_' + seq, document.all.__html);
			replaceInput(f['hp3'][i], 'hp3_' + seq, document.all.__html);
			replaceInput(f['hp1'][i].value + "-" + f['hp2'][i].value + "-" + f['hp3'][i].value, 'hp_area_' + seq, document.all.__html);
			replaceInput(f['email'][i], 'email_area_' + seq, document.all.__html);
			replaceInput(f['jumin_no'][i], 'jumin_no_' + seq, document.all.__html);
			replaceInput(f['jumin_no'][i].value.substring(0, 6), 'jumin_no1_' + seq, document.all.__html);
			replaceInput(f['jumin_no'][i].value.substring(6), 'jumin_no2_' + seq, document.all.__html);
			replaceInput(getBirthHan(f['jumin_no'][i].value, 2), 'birthHan_' + seq, document.all.__html);
			if (f['jumin_no'][i].value.length == 7 )
				replaceInput(getGenderHan(f['jumin_no'][i].value.substring(6,7), 1), 'genderHan_'+seq, document.all.__html);
			
			replaceInput(f['cust_detail_code'][i].value, 'cust_detail_code_' + seq, document.all.__html);
			<!-- IFNOT START 'modify' -->
			replaceInput(f['condition'][i].value, 'condition_' + seq, document.all.__html);
			replaceInput(f['category'][i].value, 'category_' + seq, document.all.__html);
			<!-- IFNOT END 'modify' -->

			// 개인사업자인지 법인사업자인지에 따라 다르게 적용
			// 양식에 <input type="checkbox" name="chk_person_2" style="display:none"> 이 있는 경우 개인사업자의 경우 개인인증서로 법인사업자는 사업자인증서로 서명한다.
			// 예:CJ대한통운 
			var objperson = document.getElementById("chk_person_" + cust_sign_seq);
			if (objperson != null) {
				if (f['member_gubun'][i].value == '03') {
					// 개인사업자
					if (objperson != null) objperson.checked = true;
					displayBlock2(true, "cust_gubun_person_" + cust_sign_seq, document.all.__html);  // <div class="cust_gubun_person_1" style="display:none">
					displayBlock2(false, "cust_gubun_company_" + cust_sign_seq, document.all.__html);
					displayBlock2(false, "cust_gubun_realperson_" + cust_sign_seq, document.all.__html);
				} else if (f['member_gubun'][i].value == '01' || f['member_gubun'][i].value == '02') {
					// 사업자(법인,지사)
					if(objperson != null) objperson.checked = false;
					displayBlock2(false, "cust_gubun_person_" + cust_sign_seq, document.all.__html);
					displayBlock2(true, "cust_gubun_company_" + cust_sign_seq, document.all.__html);
					displayBlock2(false, "cust_gubun_realperson_" + cust_sign_seq, document.all.__html);
				} else if(f['member_gubun'][i].value == '04') {
					// 순수개인
					displayBlock2(false, "cust_gubun_person_" + cust_sign_seq, document.all.__html);
					displayBlock2(false, "cust_gubun_company_" + cust_sign_seq, document.all.__html);
					displayBlock2(true, "cust_gubun_realperson_" + cust_sign_seq, document.all.__html);
				}
			}
		}
	}
}

function chgContDate() {
	var arr = document.forms['form1']['cont_date'].value.split("-");
	if (arr.length == 3) {
		replaceInput(arr[0], "cont_year_area", document.all.__html);
		replaceInput(arr[1], "cont_month_area", document.all.__html);
		replaceInput(arr[2], "cont_day_area", document.all.__html);
	}
}

function addPersonInfo(data) {
	if (data != null) {
		var f = document.form1;
		var agree_seq = data['agree_seq'];

		replaceInput(data['person_name'], "agree_person_name_"+agree_seq);

		f.agree_field_seq[agree_seq-1].value = data['field_seq'];
		f.agree_person_id[agree_seq-1].value = data['person_id'];
		f.agree_person_name[agree_seq-1].value = data['person_name'];
	}
}
</script>

<script>
    var t_chk;
    var t_comment;
    function fPopComment(obj)
    {
    	var layerX = 0;
        var layerY = 0;
        var temp_obj = obj;
        while (temp_obj) {
    		layerX += temp_obj.offsetLeft;
    		layerY += temp_obj.offsetTop;
    		temp_obj = temp_obj.offsetParent;
        }
        
        var	xpos  = layerX-220;
        var	ypos  = layerY-100;
        var chkObj;
        var comment_obj;

        var c = obj.childNodes;
        console.log(obj.childNodes);
        for (var i=0; i<c.length; i++) {
        	console.log(c[i].name);
            if (c[i].name=='attch') {
                chkObj = c[i];
                t_chk = chkObj;
            } else if (c[i].name=='uncheck_text') {
                comment_obj = c[i];
                t_comment = comment_obj;
            }
        }

        if (chkObj != '' && comment_obj != '') {
            var commentTable = document.getElementById("layer_uncheck");
            commentTable.style.top		= ypos+"px";
            commentTable.style.left		= xpos+"px";
            commentTable.style.display  = "";

            var comment = document.getElementById("rfile_comment");
            comment.focus();
            comment.value = comment_obj.value;
            t_comment = comment_obj;
        }
    }

    function fPopCommentClose(type) {
        if (type == 1) {
            t_comment.value = document.getElementById("rfile_comment").value.trim();
            if (t_comment.value.length > 0) {
                t_chk.checked = false;
                chkClick(t_chk,'form1','attch_yn','Y');
            } else {
                t_chk.checked = true;
                chkClick(t_chk,'form1','attch_yn','Y');
            }
        } else {
            document.getElementById("rfile_comment").value = "";
        }
        var commentTable = document.getElementById("layer_uncheck");
        if (commentTable != null)  commentTable.style.display  = "none";
    }
</script>

<script language="javascript">

<!-- LOOP START 'sign_template' -->
var comp_grid_{{sign_template.sign_seq}} = new MGRID("comp_grid_{{sign_template.sign_seq}}");
comp_grid_{{sign_template.sign_seq}}.cells = table2array("comp_template");
comp_grid_{{sign_template.sign_seq}}.callbackInsert = "setCustArea";
comp_grid_{{sign_template.sign_seq}}.callbackDelete = "setCustArea";
comp_grid_{{sign_template.sign_seq}}.cellClassName = "comp_grid_cell";
<!-- LOOP END 'sign_template' -->

var cfile_grid = new MGRID("cfile_grid");
cfile_grid.cells = table2array("cfile_template");

var rfile_grid = new MGRID("rfile_grid");
rfile_grid.cells = table2array("rfile_template");

function addClient(sign_seq, signer_max, signer_name){
	var person_yn = "{{template.person_yn}}";

	var f = document.forms['form1'];
	var grid_table = document.getElementById("comp_grid_" + sign_seq);
	if ((grid_table.rows.length-1) >= signer_max) {
		alert(signer_name + "는 " + signer_max + "개의 업체까지만 지정 가능 합니다.");
		return;
	}
	if (person_yn == "Y") {
		OpenWindows('pop_search_person.jsp?sign_seq='+sign_seq+'&template_cd={{template.template_cd}}','pop_search_comapny', '870','700');
	} else if (person_yn == "A") {
		OpenWindows('pop_search_cust.jsp?search_type=CP&sign_seq='+sign_seq,'pop_search_cust', '1100','700');
		/* 기존 거래처 팝업(담당자 노출)
		OpenWindows('pop_search_company.jsp?search_type=CP&sign_seq='+sign_seq,'pop_search_comapny', '860','700');
		*/
	} else {
		OpenWindows('pop_search_cust.jsp?sign_seq='+sign_seq,'pop_search_cust', '1100','700');
	}
}

function addClientInfo(data) {
	if (data != null) {
		var f = document.forms['form1'];
		if (f["member_no"]) {
			if (f['member_no'].type == "hidden") {
				if (f["member_no"].value == data["member_no"]) {
					alert("이미 추가 되어 있는 업체 입니다.");
					return;
				}
			} else {
				var cnt = f['member_no'].length;
			  	for (var i = 0; i < cnt; i++) {
					if (f["member_no"][i].value == data["member_no"]) {
						alert("이미 추가 되어 있는 업체 입니다.");
						return;
					}
			  	}
			}
		}
		
		var vendcd = data["vendcd"].replaceAll("-", "");
		if ("Y" == "{{template.person_yn}}" || data["member_gubun"] == "04") {
			// B2C 
		 	form_name = "person_form";
		 	template_name = "person_template";
		 	// 계약명 자동생성
		 	// 서식명 + "-" + 계약자(을)이름
		 	document.getElementById("cont_name").value = "{{template.template_name}}" + "-" + data["member_name"];
		} else {
			// B2B
			var form_name = "comp_form";
			var template_name = "comp_template";
			// 계약명 자동생성
		 	// 서식명 + "-" + 계약자(을)사업자등록번호
		 	document.getElementById("cont_name").value = "{{template.template_name}}" + "-" + vendcd;
		}
		SetFormValue(form_name, "member_no", data["member_no"]);
		SetFormValue(form_name, "vendcd", vendcd);
		SetFormValue(form_name, "member_slno", data["member_slno"]);
		SetFormValue(form_name, "member_name", data["member_name"]);
		SetFormValue(form_name, "post_code", data["post_code"]);
		SetFormValue(form_name, "address", data["address"]);
		SetFormValue(form_name, "boss_name", data["boss_name"]);
		SetFormValue(form_name, "member_gubun", data["member_gubun"]);
		SetFormValue(form_name, "user_name", data["user_name"]);
		SetFormValue(form_name, "division", data["division"]);	//부서명 추가 by jun
		SetFormValue(form_name, "tel_num", data["tel_num"]);
		SetFormValue(form_name, "hp1", data["hp1"]);
		SetFormValue(form_name, "hp2", data["hp2"]);
		SetFormValue(form_name, "hp3", data["hp3"]);
		SetFormValue(form_name, "email", data["email"]);
		var sign_seq = data["sign_seq"];
		SetFormValue(form_name,"cust_sign_seq", sign_seq);
		if (data["jumin_no"]) SetFormValue(form_name,"jumin_no",data["jumin_no"]);
		if (data["cust_detail_code"]) SetFormValue(form_name,"cust_detail_code",data["cust_detail_code"]);
		if (data["condition"]) SetFormValue(form_name,"condition",data["condition"]); // 업태
		if (data["category"]) SetFormValue(form_name,"category",data["category"]);
		
		var grid = eval("comp_grid_" + sign_seq);
		grid.cells = table2array(template_name, new Array("seq=>" + sign_seq));
		grid.addRow();

		// 양식에 컬럼에 'Y' 값이 설정되어 있을 경우 실행
		if (GetFormValue("form1", "add_cust_after")) call("call_earlypay.jsp?vendcd=" + vendcd);
		// 얼리페이 양식 추후 수정
		if (f['cont_html_cust_add_after']) eval(f['cont_html_cust_add_after'].value+"(data)");
	}
}

function addInvCsltSap(user_id, form_id) {
	OpenWindows('pop_search_inv_cslt_sap_list.jsp?user_id='+user_id+'&form_id='+form_id, 'pop_inv_cslt_sap', '870', '700');
}

function addInvCsltSapDetailInfo(data) {
	// TODO : SAP 상세 정보 세팅 로직 필요
	for(var i=0; i<Object.keys(data).length; i++){
		var key = Object.keys(data)[i];
		if(document.form1[key] != null){
			document.form1[key].value = data[key];
			if(key == "cont_amt"){
				makeCommaObj(document.form1[key]); // 금액 콤마 설정
				var num_cont_amt = data[key] * 1;
				document.form1["cont_amt_han"].value = num2han(num_cont_amt);
			}else if(key == "cont_attr_01_06" || key == "cont_attr_01_09" || key == "cont_attr_01_12" || key == "cont_attr_01_15" || key == "cont_attr_02_13" || key == "cont_attr_02_15" ||
					key == "cont_attr_02_17" || key == "cont_attr_02_20" || key == "cont_attr_02_23" || key == "cont_attr_02_26"
					){
				makeCommaObj(document.form1[key]); // 금액 콤마 설정
			}/* else if(key == "prep_paym_rete" || key == "cont_attr_01_08" || key == "cont_attr_01_11" || key == "cont_attr_01_14" || key == "cont_attr_01_07" ||
					 key == "cont_attr_01_10" || key == "cont_attr_01_13" || key == "cont_guar_amt" || key == "cont_warr_per" || key == "delay_rate" || 
					 key == "cont_attr_02_14" || key == "cont_attr_02_16" || key == "cont_attr_02_19" || key == "cont_attr_02_22" || key == "cont_attr_02_18" ||
					 key == "cont_attr_02_21" || key == "cont_attr_02_24" || key == "cont_attr_02_25"
					 ){
				var rate_num = data[key];
				if(rate_num > 0){
					if(rate_num.substring(0,1) == "."){
						rate_num = 0+rate_num;
					}
					if(rate_num.indexOf(".") != -1){
						var rate_arr = rate_num.split('.');
						document.form1[key].value = rate_arr[0] + "." +rate_arr[1].substring(0,1);
					}else{
						document.form1[key].value = rate_num + "." + 0
					}
				}
			} */
		}
	}
}

function checkStampYn() {
	var f = document.forms["form1"];
	if (validate(f)) {
		if (confirm('계약 서명요청 하시겠습니까?\n\n수정한 내용이 있을 경우 저장 후 서명요청 하세요.')) {
			var stampType = '{{cont.stamp_type}}';
			if (stampType == 'Y') {
				var url = "./check_stamp_yn.jsp";
				var data = {"cont_no" : '{{cont.cont_no}}'};
				document.getElementById("loading").style.display = 'block';
				callJqueryAjax(url, data);
			} else {
				location.href='contract_send.jsp?{{query}}';
			}
		}
	}
}

function callJqueryAjax(url, postData) {
   	$.ajax({
        url : url,
        type : "post",
        data : postData,
        success : function(data) {
        	document.getElementById("loading").style.display = 'none';
            if (data != null && data.trim().length > 0) {
            	jsonData = JSON.parse(data);
            	if (jsonData.stampYn == 'Y') {
            		location.href='contract_send.jsp?{{query}}';
            	} else {
            		alert("인지세 신청이 확인되지 않습니다.");
            		return;
            	}
            } else {
                alert("조회 중 오류가 발생했습니다.");
            }
        },
        error : function(request, status, error) {
        	document.getElementById("loading").style.display = 'none';
            alert("code:" + request.status + "\n" + "error:" + error);
        }
    });
}

function addCfileRow(){
	var f = document.forms["form1"];
	var max_cfile_seq = 0;
	var row_cnt = document.getElementById('cfile_grid').getElementsByTagName("tbody")[0].rows.length;
	if(row_cnt > 0 ){
		if(row_cnt == 1){
			max_cfile_seq = Number(f['cfile_seq'].value);
		}else{
			max_cfile_seq = Number(f['cfile_seq'][row_cnt-1].value);
		}
	}
	
	var data = table2array("cfile_template", new Array("seq=>"+(max_cfile_seq+1)));
	cfile_grid.addRow(null, data);
}

function addRfileRow(type){
	var template = type == "1"?"rfile_template":"rfile_template2";
	var data = table2array(template, new Array("seq=>"+(document.getElementById('rfile_grid').rows.length)));
	rfile_grid.addRow(null, data);
}

<!-- IF START 'efile_yn' -->
var efile_grid = new MGRID("efile_grid");
efile_grid.cells = table2array("efile_template");

function addEfileRow(){
	var data = table2array("efile_template", new Array("seq=>"+(document.getElementById('efile_grid').rows.length)));
	efile_grid.addRow(null, data);
}
function delEfile(efile_seq, reg_type){
	var td = document.getElementById("div_efile_"+efile_seq);
	if(reg_type == "10"){
		td.innerHTML = '<input type="file" name="efile_'+efile_seq+'" style="width:98%" hname="관리서류 파일" required="Y" />'
	}
	if(reg_type == '20' ){
		td.innerHTML = '<input type="file" name="efile_'+efile_seq+'" style="width:98%" hname="관리서류 파일"  />'
		document.getElementById("efile_del_yn_"+efile_seq).value="Y";
	}
}
<!-- IF END 'efile_yn' -->

function sampleDown(template_cd, template_name){
	var sample_path = "sample/"+template_cd+".pdf";
	filedown("file.path.bcontract",sample_path,template_name+".pdf");
}

//프로젝트 관리
function setProject(data){
	var f = document.forms['form1'];
	var project_name = data["project_name"] ;
	replaceInput(project_name, "project_name", document.all.__html);
	replaceInput(data['order_comp_nm'], "order_comp_nm", document.all.__html);
	replaceInput(data['project_loc'], "project_loc", document.all.__html);
	f['project_seq'].value = data["project_seq"];
	f['project_name'].value = data["project_name"];
	if(data["project_cd"] != ""){
		project_name = data["project_name"] + "("+data["project_cd"]+")";
	}
	var html = "<a href=\"javascript:OpenWindow('/web/buyer/info/pop_project_view.jsp?project_seq="+data["project_seq"]+"','pop_project',700,350)\">"+project_name+"</a>";
	document.getElementById("spn_project_name").innerHTML = html;
}

var form_name = "comp_form";
var template_name= "comp_template";

</script>

<!-- LOOP START 'cust' -->
<script language="javascript">
if ("02" == "{{cust.cust_gubun}}") {
	form_name = "person_form";
	template_name = "person_template";
} else {
	form_name = "comp_form";
	template_name = "comp_template";
}
SetFormValue(form_name, "member_no", "{{cust.member_no}}");
SetFormValue(form_name, "vendcd", "{{cust.vendcd}}");
SetFormValue(form_name, "post_code", "{{cust.post_code}}");
SetFormValue(form_name, "member_slno", "{{cust.member_slno}}");
SetFormValue(form_name, "cust_sign_seq", "{{cust.sign_seq}}");
SetFormValue(form_name, "address", "{{cust.address}}");
SetFormValue(form_name, "user_name", "{{cust.user_name}}");
SetFormValue(form_name, "division", "{{cust.division}}");	//부서명 추가 by jun
SetFormValue(form_name, "member_name", "{{cust.member_name}}");
SetFormValue(form_name, "email", "{{cust.email}}");
SetFormValue(form_name, "boss_name", "{{cust.boss_name}}");
SetFormValue(form_name, "tel_num", "{{cust.tel_num}}");
SetFormValue(form_name, "hp1", "{{cust.hp1}}");
SetFormValue(form_name, "hp2", "{{cust.hp2}}");
SetFormValue(form_name, "hp3", "{{cust.hp3}}");
SetFormValue(form_name,"jumin_no", "{{cust.jumin_no}}");
SetFormValue(form_name, "cust_detail_code", "{{cust.cust_detail_code}}");
SetFormValue(form_name, "member_gubun", "{{cust.member_gubun}}");
SetFormValue(form_name, "category", "{{cust.category}}"); 
<!-- IFNOT START 'modify' -->
	replaceInput("{{cust.field_name}}", "field_name_area", document.all.__html);
	replaceInput("{{cust.position}}", "position", document.all.__html);
<!-- IFNOT END 'modify' -->
comp_grid_{{cust.sign_seq}}.cells = table2array(template_name, new Array("seq=>{{cust.sign_seq}}"));
comp_grid_{{cust.sign_seq}}.addRow();
</script>
<!-- LOOP END 'cust' -->

<script>
// document.ready를 javascript로
document.addEventListener("DOMContentLoaded", function() {
	// 농심의 경우 삭제 버튼 제거
	document.getElementById("comp_grid_del_div_1").style.display = "none";
	// 농심의 경우 입력창 비활성화
	document.getElementById("comp_grid_address_1").readOnly = true;
	document.getElementById("comp_grid_user_name_1").readOnly = true;
	document.getElementById("comp_grid_member_name_1").readOnly = true;
	document.getElementById("comp_grid_email_1").readOnly = true;
	document.getElementById("comp_grid_boss_name_1").readOnly = true;
	document.getElementById("comp_grid_tel_num_1").readOnly = true;
	document.getElementById("comp_grid_hp1_1").readOnly = true;
	document.getElementById("comp_grid_hp2_1").readOnly = true;
	document.getElementById("comp_grid_hp3_1").readOnly = true;
	// 농심 휴대폰번호 숨김
	document.getElementById("comp_grid_hp_th_txt_1").innerHTML = "";
	document.getElementById("comp_grid_hp_th_txt_1").style.background = "white";
	document.getElementById("comp_grid_hp_th_txt_1").style.borderLeft = "none";
	document.getElementById("comp_grid_hp_td_txt_1").style.borderLeft = "none";
	document.getElementById("comp_grid_hp1_1").type= "hidden";
	document.getElementById("comp_grid_hp2_1").type= "hidden";
	document.getElementById("comp_grid_hp3_1").type= "hidden";
	document.getElementById("hp_bar1_1").innerHTML = "";
	document.getElementById("hp_bar2_1").innerHTML = "";
});

//파일명 setting
function setDocName(upfile, seq){
	var filename = upfile.value.split('/').pop().split('\\').pop().split('.'); // 파일명 추출
	var setName = "";
	var length = filename.length;
	for(var i=0; i < filename.length; i++){
		if(i+1 != length){
			if(i==0){
				setName = setName + filename[i];
			}else{
				setName = setName + "." + filename[i];
			}
		}
	}
	var cfile_doc_name = document.getElementsByName('cfile_doc_name');
	cfile_doc_name[seq-1].value = setName;
}
</script>